<!DOCTYPE html>


<html class="writer-html5" lang="en" >
<!-- Copyright (C) 2020-2021, Marek Gagolewski <https://www.gagolewski.com> -->

<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>15. ðŸš§ Multidimensional Time Series &mdash; Minimalist Data Wrangling with Python by Marek Gagolewski</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/proof.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  

  
  

  
    <link rel="canonical" href="https://datawranglingpy.gagolewski.com/chapter/350-time-multi.html" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/proof.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="16. ðŸš§ Introduction to Data Frames in pandas" href="410-dataframe.html" />
    <link rel="prev" title="14. ðŸš§ Multivariate Categorical and Relational Data" href="340-categorical-multi.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html"> Minimalist Data Wrangling with Python [DRAFTv0.1.1]
          

          
          </a>

          <div class="version">
          by <a style="color: inherit" href="https://www.gagolewski.com">Marek Gagolewski</a>
          </div>

<!--
          
            
            
              <div class="version">
                by Marek Gagolewski
              </div>
            
          
-->

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search phrase..." />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Start Here</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="000-preface.html">Preface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introducing Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="110-jupyter.html">1. Getting Started with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="120-scalar.html">2. Scalar Types in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="130-sequential.html">3. Sequential and Other Types in Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Unidimensional Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="210-vector.html">4. Introduction to Vectors in <strong class="program">numpy</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="220-histogram.html">5. Inspecting the Distribution of Numeric Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="230-aggregate.html">6. Descriptive Statistics for Numeric Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="240-transform-uni.html">7. ðŸš§ Transforming and Filtering Numeric Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="250-distribution-uni.html">8. ðŸš§ Continuous Probability Distributions (**)</a></li>
<li class="toctree-l1"><a class="reference internal" href="260-categorical-uni.html">9. ðŸš§ Handling Categorical Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="270-time-uni.html">10. ðŸš§ Processing Time Series</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Multidimensional Data</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="310-matrix.html">11. ðŸš§ Introduction to Matrices in <strong class="program">numpy</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="320-transform-multi.html">12. ðŸš§ Transforming, Aggregating, and Filtering Multidimensional Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="330-visualise-multi.html">13. ðŸš§ Visualising Multidimensional Data and Measuring Correlation</a></li>
<li class="toctree-l1"><a class="reference internal" href="340-categorical-multi.html">14. ðŸš§ Multivariate Categorical and Relational Data</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">15. ðŸš§ Multidimensional Time Series</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basic-plotting">15.1. Basic Plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#candlestick-plots">15.2. Candlestick Plots (*)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#notes-on-signal-processing-audio-image-video">15.3. Notes on Signal Processing (Audio, Image, Video) (**)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#representing-images">15.3.1. Representing Images</a></li>
<li class="toctree-l3"><a class="reference internal" href="#colour-models">15.3.2. Colour Models</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#further-reading">15.4. Further Reading</a></li>
<li class="toctree-l2"><a class="reference internal" href="#questions">15.5. Questions</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Heterogeneous Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="410-dataframe.html">16. ðŸš§ Introduction to Data Frames in <strong class="program">pandas</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="420-transform-hetero.html">17. ðŸš§ Basic Operations on Data Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="430-reshape.html">18. ðŸš§ Reshaping and Fusing Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="440-groupby.html">19. ðŸš§ Observation Grouping</a></li>
<li class="toctree-l1"><a class="reference internal" href="450-missingness.html">20. ðŸš§ Outliers, Missing, Censored, and Incorrect Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="460-sql.html">21. ðŸš§ Database Access</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Text Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="510-text.html">22. Working with Text Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="520-regex.html">23. Regular Expressions (*)</a></li>
<li class="toctree-l1"><a class="reference internal" href="530-webscrape.html">24. Exercises on Fetching and Cleaning Text Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="998-changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="999-bibliography.html">Bibliography</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">External Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/datawranglingpy/blob/master/CODE_OF_CONDUCT.md">Report Bugs or Typos</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/teaching_data">Datasets</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.gagolewski.com">Author</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Minimalist Data Wrangling with Python [DRAFTv0.1.1]</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">15. </span>ðŸš§ Multidimensional Time Series</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="410-dataframe.html" class="btn btn-neutral float-right" title="16. ðŸš§ Introduction to Data Frames in pandas" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="340-categorical-multi.html" class="btn btn-neutral float-left" title="14. ðŸš§ Multivariate Categorical and Relational Data" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="tex2jax_ignore mathjax_ignore section" id="multidimensional-time-series">
<span id="chap-time-multi"></span><h1><span class="section-number">15. </span>ðŸš§ Multidimensional Time Series<a class="headerlink" href="#multidimensional-time-series" title="Permalink to this headline">Â¶</a></h1>
<blockquote>
<div><p><em>This is an early draft of</em> Minimalist Data Wrangling with Python <em>by
<a class="reference external" href="https://www.gagolewski.com">Marek Gagolewski</a>. It is distributed
in the hope that it will be useful. Any
<a class="reference external" href="https://github.com/gagolews/datawranglingpy/blob/master/CODE_OF_CONDUCT.md">bug/typos reports/fixes</a>
are appreciated. Although available online, this is a whole course,
and should be read from the beginning to the end. In particular,
refer to the <a class="reference internal" href="000-preface.html#chap-preface"><span class="std std-ref">Preface</span></a> for general introductory remarks. Enjoy.</em></p>
</div></blockquote>
<p>Multidimensional time series stored in form of
an <em>n</em>-by-<em>m</em> matrix are best viewed as <em>m</em> time series â€“
possibly but not necessarily somehow related to each other â€“
all sampled at the same <em>n</em> points in time
(e.g., <em>m</em> different stocks on <em>n</em> consecutive days).</p>
<p>Let us make a few additions to what we have covered whilst
discussing the unidimensional case.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s2">&quot;seaborn&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="basic-plotting">
<h2><span class="section-number">15.1. </span>Basic Plotting<a class="headerlink" href="#basic-plotting" title="Permalink to this headline">Â¶</a></h2>
<p>Consider the currency exchange rates
for the first half of 2020:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">eurxxx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/gagolews/&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;teaching_data/master/marek/eurxxx-20200101-20200630-no-na.csv&quot;</span><span class="p">,</span>
    <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
<span class="n">eurxxx</span><span class="p">[:</span><span class="mi">6</span><span class="p">,</span> <span class="p">:]</span>  <span class="c1"># preview</span>
<span class="c1">## array([[1.6006 , 7.7946 , 0.84828, 4.2544 ],</span>
<span class="c1">##        [1.6031 , 7.7712 , 0.85115, 4.2493 ],</span>
<span class="c1">##        [1.6119 , 7.8049 , 0.85215, 4.2415 ],</span>
<span class="c1">##        [1.6251 , 7.7562 , 0.85183, 4.2457 ],</span>
<span class="c1">##        [1.6195 , 7.7184 , 0.84868, 4.2429 ],</span>
<span class="c1">##        [1.6193 , 7.7011 , 0.85285, 4.2422 ]])</span>
</pre></div>
</div>
<p>This gives EUR/AUD, EUR/CNY, EUR/GBP, and EUR/PLN, in this order.</p>
<p>Letâ€™s draw the four time series:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dates</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/gagolews/&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;teaching_data/master/marek/euraud-20200101-20200630-dates.txt&quot;</span><span class="p">,</span>
    <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;datetime64&quot;</span><span class="p">)</span>
<span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;AUD&quot;</span><span class="p">,</span> <span class="s2">&quot;CNY&quot;</span><span class="p">,</span> <span class="s2">&quot;GBP&quot;</span><span class="p">,</span> <span class="s2">&quot;PLN&quot;</span><span class="p">]</span>
<span class="n">styles</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;solid&quot;</span><span class="p">,</span> <span class="s2">&quot;dotted&quot;</span><span class="p">,</span> <span class="s2">&quot;dashed&quot;</span><span class="p">,</span> <span class="s2">&quot;dashdot&quot;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">eurxxx</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span> <span class="n">eurxxx</span><span class="p">[:,</span> <span class="n">i</span><span class="p">],</span> <span class="n">ls</span><span class="o">=</span><span class="n">styles</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">labels</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="id1">
<span id="fig-350-time-multi-3"></span><img alt="../_images/350-time-multi-3-1.png" src="../_images/350-time-multi-3-1.png" />
<p class="caption"><span class="caption-number">Figure 15.1 </span><span class="caption-text">plot of chunk 350-time-multi-3</span><a class="headerlink" href="#id1" title="Permalink to this image">Â¶</a></p>
</div>
<p>Unfortunately, they are all on different scales, hence
the plot is not necessarily readable.</p>
<p>Letâ€™s draw the currency exchange rates
<em>relative</em> to the prices on 2020-03-19.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">w</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">dates</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s2">&quot;2020-03-19&quot;</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">eurxxx</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span> <span class="n">eurxxx</span><span class="p">[:,</span> <span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="n">eurxxx</span><span class="p">[</span><span class="n">w</span><span class="p">,</span> <span class="n">i</span><span class="p">],</span>
        <span class="n">ls</span><span class="o">=</span><span class="n">styles</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">labels</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="id2">
<span id="fig-350-time-multi-4"></span><img alt="../_images/350-time-multi-4-3.png" src="../_images/350-time-multi-4-3.png" />
<p class="caption"><span class="caption-number">Figure 15.2 </span><span class="caption-text">plot of chunk 350-time-multi-4</span><a class="headerlink" href="#id2" title="Permalink to this image">Â¶</a></p>
</div>
<p>This way, e.g., relative
rate of 1.05 denotes the rate 5% higher than on the reference day.</p>
<blockquote>
<div><p><strong>Exercise.</strong> Based on EUR/AUD and EUR/PLN rates,
compute and plot the AUD/PLN as well as PLN/AUD ones.</p>
</div></blockquote>
<blockquote>
<div><p>(*) <strong>Exercise.</strong>
Draw the EUR/AUD and EUR/GBP rates on a single
plot, but with each series having
<a class="reference external" href="https://matplotlib.org/stable/gallery/subplots_axes_and_figures/secondary_axis.html">its own</a>
<em>y</em> axis.</p>
</div></blockquote>
<blockquote>
<div><p>(*) <strong>Exercise.</strong>
Draw the EUR/xxx  rates for your favourite currencies over a larger
period of time. Use
<a class="reference external" href="https://www.ecb.europa.eu/stats/policy_and_exchange_rates/euro_reference_exchange_rates/html/index.en.html">data</a>
downloaded from the European Central Bank. Add a few moving averages.
For each year, identify the lowest and the highest rate.</p>
</div></blockquote>
</div>
<div class="section" id="candlestick-plots">
<h2><span class="section-number">15.2. </span>Candlestick Plots (*)<a class="headerlink" href="#candlestick-plots" title="Permalink to this headline">Â¶</a></h2>
<p>Consider the BTC/USD data for 2021:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">btcusd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/gagolews/&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;teaching_data/master/marek/btcusd_ohlcv_2021.csv&quot;</span><span class="p">,</span>
    <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
<span class="n">btcusd</span><span class="p">[:</span><span class="mi">6</span><span class="p">,</span> <span class="p">:</span><span class="mi">4</span><span class="p">]</span>  <span class="c1"># preview</span>
<span class="c1">## array([[28994.01 , 29600.627, 28803.586, 29374.152],</span>
<span class="c1">##        [29376.455, 33155.117, 29091.182, 32127.268],</span>
<span class="c1">##        [32129.408, 34608.559, 32052.316, 32782.023],</span>
<span class="c1">##        [32810.949, 33440.219, 28722.756, 31971.914],</span>
<span class="c1">##        [31977.041, 34437.59 , 30221.188, 33992.43 ],</span>
<span class="c1">##        [34013.613, 36879.699, 33514.035, 36824.363]])</span>
</pre></div>
</div>
<p>This gives the open, high, low, close prices on the 365
consecutive days (we skipped the marked volume column for
readability), which is a common way to summarise daily rates.</p>
<p>The <a class="reference external" href="https://github.com/matplotlib/mplfinance"><strong class="program">mplfinance</strong></a>
package (<strong class="program">matplotlib-finance</strong>) features a few functions
related to the plotting of financial data.</p>
<p>Here, let us briefly mention the <a class="reference external" href="https://en.wikipedia.org/wiki/Candlestick_chart">candlestick plot</a>.
Unfortunately, the package requires the data to be fed
as a <strong class="program">pandas</strong> data frame (which we cover later).
However, we are now only interested in getting to know
the meaning of the basic plot elements.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mplfinance</span> <span class="k">as</span> <span class="nn">mpf</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">dates</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="s2">&quot;2021-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2022-01-01&quot;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;datetime64[D]&quot;</span><span class="p">)</span>
<span class="n">mpf</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">btcusd</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Open&quot;</span><span class="p">,</span> <span class="s2">&quot;High&quot;</span><span class="p">,</span> <span class="s2">&quot;Low&quot;</span><span class="p">,</span> <span class="s2">&quot;Close&quot;</span><span class="p">,</span> <span class="s2">&quot;Volume&quot;</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">dates</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">31</span><span class="p">,</span> <span class="p">:],</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;candle&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;charles&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="id3">
<span id="fig-350-time-multi-6"></span><img alt="../_images/350-time-multi-6-5.png" src="../_images/350-time-multi-6-5.png" />
<p class="caption"><span class="caption-number">Figure 15.3 </span><span class="caption-text">plot of chunk 350-time-multi-6</span><a class="headerlink" href="#id3" title="Permalink to this image">Â¶</a></p>
<div class="legend">
<div class="highlight-(fig:350-time-multi-6)= notranslate"><div class="highlight"><pre><span></span>```{figure} 350-time-multi-figures/350-time-multi-6-6.*
plot of chunk 350-time-multi-6
</pre></div>
</div>
</div>
</div>
<p>This depicts the January 2021 data.</p>
<p>Note that this is not a box and whisker plot.
The candlestick body denotes the difference in the market opening
and the closing price. The wicks (shadows) give the range
(high to low).</p>
<p>Green candlesticks represent bullish days â€“ where the
closing rate is greater than the opening one (uptrend).
Red candles are bearish (decline)</p>
<blockquote>
<div><p><strong>Exercise.</strong>
Draw the BTC/USD rates for the whole year
and add the 10-day moving averages.</p>
</div></blockquote>
<blockquote>
<div><p>(*) <strong>Exercise.</strong>
Draw a candlestick plot manually, without using
the <strong class="program">mplfinance</strong> package. <strong class="command">matplotlib.pyplot.fill</strong> might
be helpful.</p>
</div></blockquote>
<blockquote>
<div><p>(*) <strong>Exercise.</strong>
Using <strong class="command">matplotlib.pyplot.fill_between</strong> add a semi-transparent
polygon that fills the area bounded between the Low
and High prices on all the days.</p>
</div></blockquote>
</div>
<div class="section" id="notes-on-signal-processing-audio-image-video">
<span id="sec-image"></span><h2><span class="section-number">15.3. </span>Notes on Signal Processing (Audio, Image, Video) (**)<a class="headerlink" href="#notes-on-signal-processing-audio-image-video" title="Permalink to this headline">Â¶</a></h2>
<p>Data science classically deals with
information that is or can be represented in tabular form
and where particular observations (which can be multidimensional)
are usually independent from but still somewhat similar to each other.
We often treat them as samples from different larger populations
which we would like to describe or compare at some level
of generality (think: health data on patients being
subject to two treatment plans that we wish
to evaluate).</p>
<p>From this perspective, time series which we have briefly touched upon above
are already quite distinct, because there is some dependence
observed in the time domain: a price of a stock that we observe
today is influenced by what was happening yesterday.
There might also be some periodic trends under the hood.
Still, for data of this kind, employing statistical modelling
techniques (<em>stochastic processes</em>) still can make sense.</p>
<div style="margin-top: 1em"></div><p><em>Signals</em> such as audio, images, and video, are slightly different,
because <em>structured randomness</em> does not play dominant role there (unless
itâ€™s noise that we would like to filter out).
Instead, what is happening in the frequency (think: perceiving
pitches when listening to music)
or spatial (seeing green grass and sky on a photo) domain
will play key role there.</p>
<p>Signal processing thus requires a quite distinct
set of tools,
e.g., Fourier analysis and finite impulse response (discrete
convolution) filters. This course obviously cannot be about everything
and thus we have decided that this topic must be
treated separately elsewhere (also because
it requires some more advanced calculus skills that we
didnâ€™t assume the reader to have at this time).</p>
<p>Nevertheless, we should keep in mind that these are not completely
independent domains. For example,
we can extract various features of audio
signals (e.g., overall loudness, timbre, and danceability of each
recording in a large song database) and then treat them as tabular
data to be analysed using the techniques described in this
course.
Moreover, machine learning (e.g., deep convolutional neural networks)
algorithms may also be used for tasks such as object detection
on images or optical character recognition.</p>
<div class="section" id="representing-images">
<h3><span class="section-number">15.3.1. </span>Representing Images<a class="headerlink" href="#representing-images" title="Permalink to this headline">Â¶</a></h3>
<p>In order to demonstrate that signals are <em>some kinds of data</em>
after all and that â€“ at some basic level â€“ there is nothing particularly
mysterious behind them, let us briefly discuss how images are usually
represented.</p>
<p>The <a class="reference external" href="https://pillow.readthedocs.io"><strong class="program">pillow</strong></a>
(<strong class="program">PIL</strong>) package
provides a number of functions for basic image processing.</p>
<p>Letâ€™s load the very small example image
that we can download from our
<a class="reference external" href="https://raw.githubusercontent.com/gagolews/teaching_data/master/images/grayscale_demo_8x8.png">example data repository</a>
(the file needs to be fetched manually).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;/home/gagolews/Projects/teaching_data/images/grayscale_demo_8x8.png&quot;</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>  <span class="c1"># download it manually</span>
<span class="n">im</span><span class="o">.</span><span class="n">size</span>
<span class="c1">## (8, 8)</span>
</pre></div>
</div>
<p>It is a bitmap of height 8 and width 8 pixels.</p>
<p>Converting to a <strong class="program">numpy</strong> matrix:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">im</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">getdata</span><span class="p">())</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
<span class="n">im</span>
<span class="c1">## array([[255, 255, 255,   0,   0, 255, 255, 255],</span>
<span class="c1">##        [255, 255, 255, 255, 255, 255, 255, 255],</span>
<span class="c1">##        [119, 255, 119, 255, 119, 255, 119, 255],</span>
<span class="c1">##        [255, 119, 255, 119, 255, 119, 255, 119],</span>
<span class="c1">##        [194, 119, 194, 119, 194, 119, 194, 119],</span>
<span class="c1">##        [194, 194, 194, 194, 194, 194, 194, 194],</span>
<span class="c1">##        [255, 255, 255, 255, 255, 255, 255, 255],</span>
<span class="c1">##        [  0, 255,   0, 255,   0,   0, 255,   0]])</span>
</pre></div>
</div>
<p>The image is in 8-bit greyscale: the values
represent 256 shades of grey between 0 (black) and 255 (white).</p>
<p>And here is its plot:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s2">&quot;seaborn&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;axes.grid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;axes.grid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="id4">
<span id="fig-350-time-multi-9"></span><img alt="../_images/350-time-multi-9-9.png" src="../_images/350-time-multi-9-9.png" />
<p class="caption"><span class="caption-number">Figure 15.4 </span><span class="caption-text">plot of chunk 350-time-multi-9</span><a class="headerlink" href="#id4" title="Permalink to this image">Â¶</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Machine learning algorithms
will often be expecting flat vectors on inputs â€“ instead of an 8x8
matrix, they had rather be fed with a sequence of 64 elements.
Call <code class="docutils literal notranslate"><span class="pre">im.flatten()</span></code> to get such a form.</p>
</div>
<div class="proof proof-type-exercise" id="id5">

    <div class="proof-title">
        <span class="proof-type">Exercise 15.1</span>
        
    </div><div class="proof-content">
<p>Scale the brightness values from 0-255
to the <em>[0, 1]</em> interval, which is another common option
(as we can read from the manual of
<strong class="command">matplotlib.pyplot.imshow</strong>).</p>
</div></div><div class="proof proof-type-exercise" id="id6">

    <div class="proof-title">
        <span class="proof-type">Exercise 15.2</span>
        
    </div><div class="proof-content">
<p>(**)
Write a program that imports
and visualises chosen example images
in the famous <a class="reference external" href="http://yann.lecun.com/exdb/mnist/">MNIST</a> and
<a class="reference external" href="https://github.com/zalandoresearch/fashion-mnist">Fashion-MNIST</a>
datasets which are frequently used for benchmarking
classification algorithms.</p>
</div></div></div>
<div class="section" id="colour-models">
<h3><span class="section-number">15.3.2. </span>Colour Models<a class="headerlink" href="#colour-models" title="Permalink to this headline">Â¶</a></h3>
<p>There are quite a few <a class="reference external" href="https://en.wikipedia.org/wiki/Color_model">colour models</a>
in use, including:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/RGB_color_model">RBG</a>
(red-green-blue),</p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/RGBA_color_model">RGBA</a>
(RGB with the alpha channel governing the pixel transparency/opaqueness),</p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/HSL_and_HSV">HSV</a>
(hue-saturation-value),</p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/CMY_color_model">CMY</a>
(cyan-magenta-yellow) â€“ usually used for printing.</p></li>
</ul>
<p>They require each pixel be described by 3 (or 4 if the
alpha channel is included) values.
Thus, instead of a <em>h</em>Ã—<em>w</em> matrix,
we well be dealing with three- dimensional arrays
of size <em>h</em>Ã—<em>w</em>Ã—3 (or 4).</p>
<div class="proof proof-type-exercise" id="id7">

    <div class="proof-title">
        <span class="proof-type">Exercise 15.3</span>
        
    </div><div class="proof-content">
<p>Load and display some larger PNG or JPEG file
downloaded from the internet.</p>
</div></div></div>
</div>
<div class="section" id="further-reading">
<h2><span class="section-number">15.4. </span>Further Reading<a class="headerlink" href="#further-reading" title="Permalink to this headline">Â¶</a></h2>
<p>Python packages for signal processing worth inspecting:</p>
<ul class="simple">
<li><p><strong class="program">scipy.signal</strong> and <strong class="program">scipy.ndimage</strong></p></li>
<li><p><a class="reference external" href="https://pillow.readthedocs.io"><strong class="program">pillow</strong></a></p></li>
<li><p><a class="reference external" href="https://scikit-image.org/"><strong class="program">scikit-image</strong></a></p></li>
<li><p><a class="reference external" href="https://www.opencv.org"><strong class="program">OpenCV</strong></a> (itâ€™s a C++ library
for image and video processing with Python bindings)</p></li>
</ul>
<p>Literature:</p>
<ul class="simple">
<li><p>Ken Steiglitz, <em>A Digital Signal Processing Primer:
With Applications to Digital Audio and Computer Music</em>,
Pearson, 1996.</p></li>
<li><p>Steven W. Smith, <em>The Scientist and Engineerâ€™s Guide to
Digital Signal Processing</em>, Newnes, 2002.
<a class="reference external" href="https://www.dspguide.com/">https://www.dspguide.com/</a></p></li>
</ul>
</div>
<div class="section" id="questions">
<h2><span class="section-number">15.5. </span>Questions<a class="headerlink" href="#questions" title="Permalink to this headline">Â¶</a></h2>
<div class="proof proof-type-exercise" id="id8">

    <div class="proof-title">
        <span class="proof-type">Exercise 15.4</span>
        
    </div><div class="proof-content">
<p>(*) In your own words, describe the key elements
of a candlestick plot.</p>
</div></div><div class="proof proof-type-exercise" id="id9">

    <div class="proof-title">
        <span class="proof-type">Exercise 15.5</span>
        
    </div><div class="proof-content">
<p>(**)
What colours do the following
<a class="reference external" href="https://en.wikipedia.org/wiki/Web_colors">RGB hex triples</a>
represent? <code class="docutils literal notranslate"><span class="pre">#ff0000</span></code>, <code class="docutils literal notranslate"><span class="pre">#808000</span></code>, <code class="docutils literal notranslate"><span class="pre">#cccccc</span></code>, <code class="docutils literal notranslate"><span class="pre">#00aaff</span></code>?</p>
</div></div><div class="proof proof-type-exercise" id="id10">

    <div class="proof-title">
        <span class="proof-type">Exercise 15.6</span>
        
    </div><div class="proof-content">
<p>(**)
What are some <a class="reference external" href="https://en.wikipedia.org/wiki/Color_model">other</a>
popular colour models?</p>
</div></div></div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="410-dataframe.html" class="btn btn-neutral float-right" title="16. ðŸš§ Introduction to Data Frames in pandas" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="340-categorical-multi.html" class="btn btn-neutral float-left" title="14. ðŸš§ Multivariate Categorical and Relational Data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Marek Gagolewski. Licensed under CC BY-NC-ND 4.0.
      <span class="lastupdated">
        Last updated on 2022-03-28T17:55:35+1100.
      </span>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a>
    and a customised <a href="https://github.com/rtfd/sphinx_rtd_theme">rtd</a> theme.
    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>