<!DOCTYPE html>


<html class="writer-html5" lang="en" >
<!-- Copyright (C) 2020-2021, Marek Gagolewski <https://www.gagolewski.com> -->

<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>11. Introduction to Matrices in numpy &mdash; Minimalist Data Wrangling with Python by Marek Gagolewski</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/proof.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  

  
  

  
    <link rel="canonical" href="https://datawranglingpy.gagolewski.com/chapter/310-matrix.html" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/proof.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="12. Transforming, Aggregating, and Filtering Multidimensional Data" href="320-transform-multi.html" />
    <link rel="prev" title="10. Processing Time Series" href="270-time-uni.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html"> Minimalist Data Wrangling with Python [DRAFTv0.1]
          

          
          </a>

          <div class="version">
          by <a style="color: inherit" href="https://www.gagolewski.com">Marek Gagolewski</a>
          </div>

<!--
          
            
            
              <div class="version">
                by Marek Gagolewski
              </div>
            
          
-->

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search phrase..." />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Start Here</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="000-preface.html">Preface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introducing Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="110-jupyter.html">1. Getting Started with Python and JupyterLab</a></li>
<li class="toctree-l1"><a class="reference internal" href="120-scalar.html">2. Scalar Types in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="130-sequential.html">3. Sequential and Other Types in Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Unidimensional Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="210-vector.html">4. Introduction to Vectors in <em>numpy</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="220-histogram.html">5. Inspecting the Distribution of Numeric Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="230-aggregate.html">6. Descriptive Statistics for Continuous Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="240-transform-uni.html">7. Transforming and Filtering Continuous Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="250-distribution-uni.html">8. Continuous Probability Distributions (**)</a></li>
<li class="toctree-l1"><a class="reference internal" href="260-categorical-uni.html">9. Handling Categorical Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="270-time-uni.html">10. Processing Time Series</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Multidimensional Data</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">11. Introduction to Matrices in <em>numpy</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-matrices">11.1. Creating Matrices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#reading-csv-files">11.1.1. Reading CSV Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enumerating-elements">11.1.2. Enumerating Elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#repeating-arrays">11.1.3. Repeating  Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stacking-arrays">11.1.4. Stacking  Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-functions">11.1.5. Other Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#reshaping-matrices">11.2. Reshaping Matrices</a></li>
<li class="toctree-l2"><a class="reference internal" href="#further-reading">11.3. Further Reading</a></li>
<li class="toctree-l2"><a class="reference internal" href="#questions">11.4. Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="320-transform-multi.html">12. Transforming, Aggregating, and Filtering Multidimensional Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="330-categorical-multi.html">13. Multivariate Categorical and Relational Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="330-visualise-multi.html">14. Visualising Multidimensional Data and Measuring Correlation</a></li>
<li class="toctree-l1"><a class="reference internal" href="350-time-multi.html">15. Multidimensional Time Series</a></li>
<li class="toctree-l1"><a class="reference internal" href="360-image.html">16. Notes on Signal Processing (Audio, Image, Video)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Heterogeneous Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="410-dataframe.html">17. Introduction to Data Frames in <em>pandas</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="420-transform-hetero.html">18. Basic Operations on Data Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="430-reshape.html">19. Reshaping and Fusing Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="440-groupby.html">20. Observation Grouping</a></li>
<li class="toctree-l1"><a class="reference internal" href="450-missingness.html">21. Outliers, Missing, Censored, and Incorrect Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="460-sql.html">22. Database Access</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Text Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="510-text.html">23. Working with Text Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="520-regex.html">24. Regular Expressions (*)</a></li>
<li class="toctree-l1"><a class="reference internal" href="530-webscrape.html">25. Fetching and Cleaning Text Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="999-bibliography.html">Bibliography</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">External Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/datawranglingpy/blob/master/CODE_OF_CONDUCT.md">Report Bugs or Typos</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.gagolewski.com">Author</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Minimalist Data Wrangling with Python [DRAFTv0.1]</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">11. </span>Introduction to Matrices in <em>numpy</em></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="320-transform-multi.html" class="btn btn-neutral float-right" title="12. Transforming, Aggregating, and Filtering Multidimensional Data" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="270-time-uni.html" class="btn btn-neutral float-left" title="10. Processing Time Series" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="tex2jax_ignore mathjax_ignore section" id="introduction-to-matrices-in-numpy">
<span id="chap-matrix"></span><h1><span class="section-number">11. </span>Introduction to Matrices in <em>numpy</em><a class="headerlink" href="#introduction-to-matrices-in-numpy" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><em>Minimalist Data Wrangling with Python</em> is a very-early-and-rough-draft
of the forthcoming (ETA 2023) textbook by
<a class="reference external" href="https://www.gagolewski.com">Marek Gagolewski</a>.
It is distributed in the hope that it will be useful.
If you detect any bugs or typos, please share them by
<a class="reference external" href="https://github.com/gagolews/datawranglingpy/blob/master/CODE_OF_CONDUCT.md">email</a>.
Although available online, this is a whole course, and should be read
from the beginning to the end. In particular, refer to the Preface for
general introductory remarks. Enjoy.</p>
</div></blockquote>
<p>From the perspective of structured datasets, a
vector often represents a single feature:
<em>n</em> measurements of the same quantitative or qualitative property,
e.g., heights of <em>n</em> different patients,
age category brackets of <em>n</em> runners,
or prices of some stock at <em>n</em> consecutive days.</p>
<p>By far (assuming we have solved all the suggested exercises)
we should have become quite fluent with the methods for processing
of such one-dimensional arrays.</p>
<p>The time has come to increase the level of complexity – slightly –
by allowing each of the <em>n</em> entities be described by possibly more
than one, let’s say <em>m</em>, features.
We can arrange all the observations in a table with <em>n</em> rows and <em>m</em> columns
(just like in spreadsheets).</p>
<p>Such objects can be expressed with <em>numpy</em> as two-dimensional
arrays which we will refer to as <em>matrices</em>.
Thanks to matrices, we can all keep <em>m</em> vectors of length
<em>n</em> together in a single object and process them all at once
(or <em>n</em> vectors of length <em>m</em>, depending how we want to look at it).
Very convenient.</p>
<blockquote>
<div><p><strong>Important.</strong> Just like vectors, matrices were
designed to store data of the same type.
Later we will cover <em>data frames</em>, which further increase the
complexity (and freedom) degree by allowing for mixed data types
(e.g., numerical and categorical; this will enable us
to perform data analysis in subgroups more easily)
and also for the rows and columns be named.
Many data analysis algorithms convert data frames to matrices
automatically and deal with them as such,
and from the computational side, it is <em>numpy</em> which does
most of the “mathematical” work.
Our ambitions is to go way beyond very basic data wrangling
(this is a university-level course after all),
and this is why before proceeding with
<em>pandas</em>, we are learning the former in detail.</p>
</div></blockquote>
<div class="section" id="creating-matrices">
<h2><span class="section-number">11.1. </span>Creating Matrices<a class="headerlink" href="#creating-matrices" title="Permalink to this headline">¶</a></h2>
<div class="section" id="reading-csv-files">
<h3><span class="section-number">11.1.1. </span>Reading CSV Files<a class="headerlink" href="#reading-csv-files" title="Permalink to this headline">¶</a></h3>
<p>Tabular data are often stored and distributed
in a very portable plain-text format called CSV (comma-separated values)
or variants thereof.</p>
<p><code class="docutils literal notranslate"><span class="pre">numpy.loadtxt</span></code>, which we have already been using, supports them quite well
as long as they do not feature column names (just raw data).
Unfortunately, most CSV files do, and hence it will be better if
we rely on a corresponding function from the <em>pandas</em> package:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/gagolews/&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;teaching_data/master/marek/nhanes_adult_female_bmx_2020.csv&quot;</span><span class="p">,</span>
    <span class="n">comment</span><span class="o">=</span><span class="s2">&quot;#&quot;</span><span class="p">)</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>  <span class="c1"># data frames will be covered later</span>
<span class="n">body</span><span class="p">[:</span><span class="mi">6</span><span class="p">,</span> <span class="p">:]</span>  <span class="c1"># 6 first rows, all columns</span>
<span></span><span class="c1">## array([[ 97.1, 160.2,  34.7,  40.8,  35.8, 126.1, 117.9],</span>
<span class="c1">##        [ 91.1, 152.7,  33.5,  33. ,  38.5, 125.5, 103.1],</span>
<span class="c1">##        [ 73. , 161.2,  37.4,  38. ,  31.8, 106.2,  92. ],</span>
<span class="c1">##        [ 61.7, 157.4,  38. ,  34.7,  29. , 101. ,  90.5],</span>
<span class="c1">##        [ 55.4, 154.6,  34.6,  34. ,  28.3,  92.5,  73.2],</span>
<span class="c1">##        [ 62. , 144.7,  32.5,  34.2,  29.8, 106.7,  84.8]])</span>
</pre></div>
</div>
<p>This is an extended version of the
National Health and Nutrition Examination Survey
(<a class="reference external" href="https://wwwn.cdc.gov/nchs/nhanes/search/datapage.aspx">NHANES</a>
dataset), where we are given
body measurements of adult females, in the following order:</p>
<ol class="simple">
<li><p>weight (kg),</p></li>
<li><p>standing height (cm),</p></li>
<li><p>upper arm length (cm),</p></li>
<li><p>upper leg length (cm),</p></li>
<li><p>arm circumference (cm),</p></li>
<li><p>hip circumference (cm),</p></li>
<li><p>waist circumference (cm).</p></li>
</ol>
<p>Unfortunately, <em>numpy</em> matrices do not support column
naming, so these should be noted down separately elsewhere.</p>
<p>What we are dealing with is still a <em>numpy</em> array:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
<span></span><span class="c1">## &lt;class &#39;numpy.ndarray&#39;&gt;</span>
</pre></div>
</div>
<p>however, this time a two-dimensional one:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">body</span><span class="o">.</span><span class="n">ndim</span>
<span></span><span class="c1">## 2</span>
</pre></div>
</div>
<p>which means that the <code class="docutils literal notranslate"><span class="pre">shape</span></code> slot will now be a tuple of length 2:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">body</span><span class="o">.</span><span class="n">shape</span>
<span></span><span class="c1">## (4221, 7)</span>
</pre></div>
</div>
<p>this gives the number of rows and columns, respectively.</p>
</div>
<div class="section" id="enumerating-elements">
<h3><span class="section-number">11.1.2. </span>Enumerating Elements<a class="headerlink" href="#enumerating-elements" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">numpy.array</span></code> can create a two-dimensional array based on a list
of lists or vectors of identical lengths.
Each of them will constitute a separate row of the resulting matrix.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
    <span class="p">[</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">4</span> <span class="p">],</span>
    <span class="p">[</span> <span class="mi">5</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">8</span> <span class="p">],</span>
    <span class="p">[</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span> <span class="p">]</span>
<span class="p">])</span>
<span></span><span class="c1">## array([[ 1,  2,  3,  4],</span>
<span class="c1">##        [ 5,  6,  7,  8],</span>
<span class="c1">##        [ 9, 10, 11, 12]])</span>
</pre></div>
</div>
<p>gives a 3-by-4 (3×4) matrix,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">])</span>
<span></span><span class="c1">## array([[1],</span>
<span class="c1">##        [2],</span>
<span class="c1">##        [3]])</span>
</pre></div>
</div>
<p>yields a 3-by-1 one (we call it a <em>column vector</em>,
but it is still a matrix — we’ll soon learn that shapes
can make a significant difference), and</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="p">])</span>
<span></span><span class="c1">## array([[1, 2, 3, 4]])</span>
</pre></div>
</div>
<p>produces a 1-by-4 array (a <em>row vector</em>).</p>
</div>
<div class="section" id="repeating-arrays">
<h3><span class="section-number">11.1.3. </span>Repeating  Arrays<a class="headerlink" href="#repeating-arrays" title="Permalink to this headline">¶</a></h3>
<p>The previously mentioned <code class="docutils literal notranslate"><span class="pre">numpy.tile</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy.repeat</span></code>
can also generate some nice matrices.
Consider the following examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="mi">4</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span></span><span class="c1">## array([[1, 2, 3],</span>
<span class="c1">##        [1, 2, 3],</span>
<span class="c1">##        [1, 2, 3],</span>
<span class="c1">##        [1, 2, 3]])</span>
</pre></div>
</div>
<p>Axis <code class="docutils literal notranslate"><span class="pre">0</span></code> (the first one) is the rowwise one.
Axis <code class="docutils literal notranslate"><span class="pre">1</span></code> (the second one) refers to the columns:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">([[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">]],</span> <span class="mi">3</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span></span><span class="c1">## array([[1, 1, 1],</span>
<span class="c1">##        [2, 2, 2],</span>
<span class="c1">##        [3, 3, 3],</span>
<span class="c1">##        [4, 4, 4]])</span>
</pre></div>
</div>
<p>Note the double square brackets which mean that we are
replicating a row or a column vector, not a flat vector.</p>
<blockquote>
<div><p><strong>Exercise.</strong>
How to obtain matrices of following kind programmatically?</p>
<div class="math notranslate nohighlight">
\[\begin{split}\left[
&gt; \begin{array}{cc}
&gt;     1 &amp; 2 \\
&gt;     1 &amp; 2 \\
&gt;     1 &amp; 2 \\
&gt;     3 &amp; 4 \\
&gt;     3 &amp; 4 \\
&gt;     3 &amp; 4 \\
&gt;     3 &amp; 4 \\
&gt; \end{array}
&gt; \right], \qquad
&gt; \left[
&gt; \begin{array}{cccccccc}
&gt;     1 &amp; 2 &amp; 1 &amp; 2&amp; 1&amp; 2&amp; 1&amp; 2 \\
&gt;     1 &amp; 2 &amp; 1 &amp; 2&amp; 1&amp; 2&amp; 1&amp; 2 \\
&gt;     1 &amp; 2 &amp; 1 &amp; 2&amp; 1&amp; 2&amp; 1&amp; 2 \\
&gt; \end{array}
&gt; \right], \qquad
&gt; \left[
&gt; \begin{array}{ccccccc}
&gt;     1&amp; 1&amp; 1&amp; 2&amp; 2&amp; 2 &amp; 2 \\
&gt;     3&amp; 3&amp; 3&amp; 4&amp; 4&amp; 4 &amp; 4 \\
&gt; \end{array}
&gt; \right].\end{split}\]</div>
</div></blockquote>
</div>
<div class="section" id="stacking-arrays">
<h3><span class="section-number">11.1.4. </span>Stacking  Arrays<a class="headerlink" href="#stacking-arrays" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">numpy.column_stack</span></code> and <code class="docutils literal notranslate"><span class="pre">numpy.row_stack</span></code> take
a tuple of array-like objects and bind them column- or rowwisely
to form a single matrix:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">(([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">]))</span>
<span></span><span class="c1">## array([[10, 30, 50],</span>
<span class="c1">##        [20, 40, 60]])</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">row_stack</span><span class="p">(([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">]))</span>
<span></span><span class="c1">## array([[10, 20],</span>
<span class="c1">##        [30, 40],</span>
<span class="c1">##        [50, 60]])</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span>
    <span class="n">np</span><span class="o">.</span><span class="n">row_stack</span><span class="p">(([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">])),</span>
    <span class="p">[</span><span class="mi">70</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">90</span><span class="p">]</span>
<span class="p">))</span>
<span></span><span class="c1">## array([[10, 20, 70],</span>
<span class="c1">##        [30, 40, 80],</span>
<span class="c1">##        [50, 60, 90]])</span>
</pre></div>
</div>
<blockquote>
<div><p><strong>Exercise.</strong>
Perform similar operations
using <code class="docutils literal notranslate"><span class="pre">numpy.append</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.vstack</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.hstack</span></code>,
<code class="docutils literal notranslate"><span class="pre">numpy.concatenate</span></code>, and (*) <code class="docutils literal notranslate"><span class="pre">numpy.c_</span></code>.</p>
</div></blockquote>
<blockquote>
<div><p><strong>Exercise.</strong> Using <code class="docutils literal notranslate"><span class="pre">numpy.insert</span></code>,
and a new row/column at the beginning, end, and in the middle
of an array.</p>
</div></blockquote>
</div>
<div class="section" id="other-functions">
<h3><span class="section-number">11.1.5. </span>Other Functions<a class="headerlink" href="#other-functions" title="Permalink to this headline">¶</a></h3>
<p>Many built-in functions allow for generating arrays
of arbitrary shapes (not only vectors). For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">12345678</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>  <span class="c1"># not: rand((3, 4))</span>
<span></span><span class="c1">## array([[0.24580423, 0.59642861, 0.35879163, 0.37891011],</span>
<span class="c1">##        [0.02445137, 0.23830957, 0.38793433, 0.68054104],</span>
<span class="c1">##        [0.83934083, 0.76073689, 0.2217416 , 0.06344161]])</span>
</pre></div>
</div>
<p>Similarly with <em>scipy</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">scipy.stats</span>
<span class="n">scipy</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">uniform</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span></span><span class="c1">## array([[-0.22055625, -0.27825863, -0.80586116, -0.48853833, -0.93119693],</span>
<span class="c1">##        [-0.60585732, -0.01827233, -0.69509149, -0.218041  , -0.26529402]])</span>
</pre></div>
</div>
<blockquote>
<div><p><strong>Exercise.</strong> Check out the following functions:
<code class="docutils literal notranslate"><span class="pre">numpy.eye</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.diag</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.zeros</span></code>,
<code class="docutils literal notranslate"><span class="pre">numpy.ones</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.empty</span></code>.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="reshaping-matrices">
<h2><span class="section-number">11.2. </span>Reshaping Matrices<a class="headerlink" href="#reshaping-matrices" title="Permalink to this headline">¶</a></h2>
<p>Let’s take an example 3-by-4 matrix:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
    <span class="p">[</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">4</span> <span class="p">],</span>
    <span class="p">[</span> <span class="mi">5</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">8</span> <span class="p">],</span>
    <span class="p">[</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span> <span class="p">]</span>
<span class="p">])</span>
</pre></div>
</div>
<p>Internally, a matrix is represented using a <em>long</em> flat vector
where elements are stored in
the row-major order (sometimes referred to as a C-style array,
as opposed to Fortran-style):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">.</span><span class="n">size</span>  <span class="c1"># total number of elements</span>
<span></span><span class="c1">## 12</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>  <span class="c1"># the underlying array</span>
<span></span><span class="c1">## array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12])</span>
</pre></div>
</div>
<p>It is the <code class="docutils literal notranslate"><span class="pre">shape</span></code> slot that is causing the 12 elements be treated
if they were arranged on a 3 by 4 grid.
We can change it anytime without modifying the underlying
data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># a tuple of length 2</span>
<span class="n">A</span>
<span></span><span class="c1">## array([[ 1,  2,  3],</span>
<span class="c1">##        [ 4,  5,  6],</span>
<span class="c1">##        [ 7,  8,  9],</span>
<span class="c1">##        [10, 11, 12]])</span>
</pre></div>
</div>
<p>or even:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="p">)</span>  <span class="c1"># a tuple of length 1</span>
<span class="n">A</span>
<span></span><span class="c1">## array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12])</span>
</pre></div>
</div>
<p>For convenience, there is also the <code class="docutils literal notranslate"><span class="pre">reshape</span></code> method
that returns a modified version of the object it is applied on:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span></span><span class="c1">## array([[ 1,  2,  3,  4,  5,  6],</span>
<span class="c1">##        [ 7,  8,  9, 10, 11, 12]])</span>
</pre></div>
</div>
<p>Here, “<code class="docutils literal notranslate"><span class="pre">-1</span></code>” means that <em>numpy</em> must deduce itself how many rows
we actually want in the result (12 elements are supposed
to be arranged in 6 columns, so the maths behind it is not rocket science).</p>
<p>Another example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">A</span>
<span></span><span class="c1">## array([[0. , 0.1, 0.2, 0.3, 0.4],</span>
<span class="c1">##        [0.5, 0.6, 0.7, 0.8, 0.9],</span>
<span class="c1">##        [1. , 1.1, 1.2, 1.3, 1.4],</span>
<span class="c1">##        [1.5, 1.6, 1.7, 1.8, 1.9]])</span>
</pre></div>
</div>
<p>We should also note that reshaping is not the same
as matrix <em>transpose</em>, which also changes the order of elements:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">.</span><span class="n">T</span>  <span class="c1"># transpose</span>
<span></span><span class="c1">## array([[0. , 0.5, 1. , 1.5],</span>
<span class="c1">##        [0.1, 0.6, 1.1, 1.6],</span>
<span class="c1">##        [0.2, 0.7, 1.2, 1.7],</span>
<span class="c1">##        [0.3, 0.8, 1.3, 1.8],</span>
<span class="c1">##        [0.4, 0.9, 1.4, 1.9]])</span>
</pre></div>
</div>
<p>Here, the rows became columns and vice versa.</p>
</div>
<div class="section" id="further-reading">
<h2><span class="section-number">11.3. </span>Further Reading<a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://numpy.org/devdocs/user/basics.creation.html">https://numpy.org/devdocs/user/basics.creation.html</a></p>
</div>
<div class="section" id="questions">
<h2><span class="section-number">11.4. </span>Questions<a class="headerlink" href="#questions" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p>What is the difference between
<code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code>, <code class="docutils literal notranslate"><span class="pre">[[1,</span> <span class="pre">2,</span> <span class="pre">3]]</span></code> and <code class="docutils literal notranslate"><span class="pre">[[1],</span> <span class="pre">[2],</span> <span class="pre">[3]]</span></code> in the context
of array creation?</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">A</span></code> is a matrix with 5 rows and 6 columns,
what is the difference between <code class="docutils literal notranslate"><span class="pre">A.reshape(6,</span> <span class="pre">5)</span></code> and <code class="docutils literal notranslate"><span class="pre">A.T</span></code>?</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">A</span></code> is a matrix with 5 rows and 6 columns,
what is the meaning of:
<code class="docutils literal notranslate"><span class="pre">A.reshape(-1)</span></code>, <code class="docutils literal notranslate"><span class="pre">A.reshape(3,</span> <span class="pre">-1)</span></code>,
<code class="docutils literal notranslate"><span class="pre">A.reshape(-1,</span> <span class="pre">3)</span></code>, <code class="docutils literal notranslate"><span class="pre">A.reshape(-1,</span> <span class="pre">-1)</span></code>,
<code class="docutils literal notranslate"><span class="pre">A.shape</span> <span class="pre">=</span> <span class="pre">(3,</span> <span class="pre">10)</span></code>, and <code class="docutils literal notranslate"><span class="pre">A.shape</span> <span class="pre">=</span> <span class="pre">(-1,</span> <span class="pre">3)</span></code>?</p></li>
<li><p>List some methods to add a new row to an existing matrix.</p></li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="320-transform-multi.html" class="btn btn-neutral float-right" title="12. Transforming, Aggregating, and Filtering Multidimensional Data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="270-time-uni.html" class="btn btn-neutral float-left" title="10. Processing Time Series" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2015-2022, Marek Gagolewski. Licensed under CC BY-NC-ND 4.0.
      <span class="lastupdated">
        Last updated on 2022-03-27T18:03:39+1100.
      </span>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a>
    and a customised <a href="https://github.com/rtfd/sphinx_rtd_theme">rtd</a> theme.
    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>