<!DOCTYPE html>


<html class="writer-html5" lang="en" >
<!-- Copyright (C) 2020-2021, Marek Gagolewski <https://www.gagolewski.com> -->

<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>9. Introduction to Matrices in numpy &mdash; Minimalist Data Wrangling with Python by Marek Gagolewski</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/proof.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  

  
  

  
    <link rel="canonical" href="https://datawranglingpy.gagolewski.com/chapter/310-matrix.html" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/proof.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="10. 🚧 Transforming, Aggregating, and Filtering Multidimensional Data" href="320-transform-multi.html" />
    <link rel="prev" title="8. 🚧 Continuous Probability Distributions (**)" href="250-distribution-uni.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html"> Minimalist Data Wrangling with Python [DRAFTv0.1.1]
          

          
          </a>

          <div class="version">
          by <a style="color: inherit" href="https://www.gagolewski.com">Marek Gagolewski</a>
          </div>

<!--
          
            
            
              <div class="version">
                by Marek Gagolewski
              </div>
            
          
-->

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search phrase..." />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Start Here</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="000-preface.html">Preface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introducing Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="110-jupyter.html">1. Getting Started with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="120-scalar.html">2. Scalar Types in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="130-sequential.html">3. Sequential and Other Types in Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Unidimensional Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="210-vector.html">4. Introduction to Vectors in <strong class="program">numpy</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="220-histogram.html">5. Inspecting the Distribution of Numeric Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="230-aggregate.html">6. Aggregation of Numeric Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="240-transform-uni.html">7. Transforming and Filtering Numeric Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="250-distribution-uni.html">8. 🚧 Continuous Probability Distributions (**)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Multidimensional Data</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">9. Introduction to Matrices in <strong class="program">numpy</strong></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-matrices">9.1. Creating Matrices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#reading-csv-files">9.1.1. Reading CSV Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enumerating-elements">9.1.2. Enumerating Elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#repeating-arrays">9.1.3. Repeating  Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stacking-arrays">9.1.4. Stacking  Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-functions">9.1.5. Other Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#reshaping-matrices">9.2. Reshaping Matrices</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mathematical-notion">9.3. Mathematical Notion</a></li>
<li class="toctree-l2"><a class="reference internal" href="#questions">9.4. Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="320-transform-multi.html">10. 🚧 Transforming, Aggregating, and Filtering Multidimensional Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="330-visualise-multi.html">11. 🚧 Visualising Multidimensional Data and Measuring Correlation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Heterogeneous Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="410-dataframe.html">12. 🚧 Introduction to Data Frames in <strong class="program">pandas</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="420-transform-hetero.html">13. 🚧 Basic Operations on Data Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="430-reshape.html">14. 🚧 Reshaping and Fusing Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="440-categorical.html">15. Handling Categorical Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="450-groupby.html">16. 🚧 Observation Grouping</a></li>
<li class="toctree-l1"><a class="reference internal" href="460-sql.html">17. Database Access</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Text and Other Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="510-text.html">18. Working with Text Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="520-regex.html">19. Regular Expressions (*)</a></li>
<li class="toctree-l1"><a class="reference internal" href="530-missingness.html">20. Outliers, Missing, Censored, and Incorrect Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="540-time.html">21. Time Series</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="998-changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="999-bibliography.html">Bibliography</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://datawranglingpy.gagolewski.com/datawranglingpy.pdf">This Book in PDF</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/datawranglingpy/blob/master/CODE_OF_CONDUCT.md">Report Bugs or Typos</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/teaching_data">Datasets</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.gagolewski.com">Author</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Minimalist Data Wrangling with Python [DRAFTv0.1.1]</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">9. </span>Introduction to Matrices in <strong class="program">numpy</strong></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="320-transform-multi.html" class="btn btn-neutral float-right" title="10. 🚧 Transforming, Aggregating, and Filtering Multidimensional Data" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="250-distribution-uni.html" class="btn btn-neutral float-left" title="8. 🚧 Continuous Probability Distributions (**)" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="tex2jax_ignore mathjax_ignore section" id="introduction-to-matrices-in-numpy">
<span id="chap-matrix"></span><h1><span class="section-number">9. </span>Introduction to Matrices in <strong class="program">numpy</strong><a class="headerlink" href="#introduction-to-matrices-in-numpy" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><em>This is an early draft of</em> Minimalist Data Wrangling with Python <em>by
<a class="reference external" href="https://www.gagolewski.com">Marek Gagolewski</a>. It is distributed
in the hope that it will be useful. Any
<a class="reference external" href="https://github.com/gagolews/datawranglingpy/blob/master/CODE_OF_CONDUCT.md">bug/typos reports/fixes</a>
are appreciated. Although available online, this is a whole course,
and should be read from the beginning to the end. In particular,
refer to the <a class="reference internal" href="000-preface.html#chap-preface"><span class="std std-ref">Preface</span></a> for general introductory remarks.</em></p>
</div></blockquote>
<p>From the perspective of structured datasets, a
vector often represents a single feature:
<em>n</em> measurements of the same quantitative or qualitative property,
e.g., heights of <em>n</em> different patients,
age category brackets of <em>n</em> runners,
or prices of some stock at <em>n</em> consecutive days.</p>
<p>By far (assuming we have solved all the suggested exercises)
we should have become quite fluent with the methods for processing
of such one-dimensional arrays.</p>
<p>The time has come to increase the level of complexity – slightly –
by allowing each of the <em>n</em> entities be described by possibly more
than one, let’s say <em>m</em>, features.
We can arrange all the observations in a table with <em>n</em> rows and <em>m</em> columns
(just like in spreadsheets).</p>
<p>Such objects can be expressed with <strong class="program">numpy</strong> as two-dimensional
arrays which we will refer to as <em>matrices</em>.
Thanks to matrices, we can all keep <em>m</em> vectors of length
<em>n</em> together in a single object and process them all at once
(or <em>n</em> vectors of length <em>m</em>, depending how we want to look at it).
Very convenient.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Just like vectors, matrices were
designed to store data of the same type.
In <a class="reference internal" href="410-dataframe.html#chap-dataframe"><span class="std std-numref">Chapter 12</span></a> we will cover <em>data frames</em>,
which further increase the
complexity (and freedom) degree by allowing for mixed data types
(e.g., numerical and categorical; this will enable us
to perform data analysis in subgroups more easily)
and also for the rows and columns be named.
Many data analysis algorithms convert data frames to matrices
automatically and deal with them as such,
and from the computational side, it is <strong class="program">numpy</strong> which does
most of the “mathematical” work.
Our ambitions is to go way beyond very basic data wrangling
(this is a university-level course after all),
and that’s why before proceeding with
<strong class="program">pandas</strong>, we are learning the former in detail.</p>
</div>
<div class="section" id="creating-matrices">
<h2><span class="section-number">9.1. </span>Creating Matrices<a class="headerlink" href="#creating-matrices" title="Permalink to this headline">¶</a></h2>
<div class="section" id="reading-csv-files">
<h3><span class="section-number">9.1.1. </span>Reading CSV Files<a class="headerlink" href="#reading-csv-files" title="Permalink to this headline">¶</a></h3>
<p>Tabular data are often stored and distributed
in a very portable plain-text format called CSV (comma-separated values)
or variants thereof.</p>
<p><strong class="command">numpy.loadtxt</strong>, which we have already been using, supports
them quite well
as long as they do not feature column names (just raw data).
Unfortunately, most CSV files do, and hence it will be better if
we rely on a corresponding function from the <strong class="program">pandas</strong> package
(which we will discuss in ):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/gagolews/&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;teaching_data/master/marek/nhanes_adult_female_bmx_2020.csv&quot;</span><span class="p">,</span>
    <span class="n">comment</span><span class="o">=</span><span class="s2">&quot;#&quot;</span><span class="p">)</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>  <span class="c1"># data frames will be covered later</span>
<span class="n">body</span><span class="p">[:</span><span class="mi">6</span><span class="p">,</span> <span class="p">:]</span>  <span class="c1"># 6 first rows, all columns</span>
<span class="c1">## array([[ 97.1, 160.2,  34.7,  40.8,  35.8, 126.1, 117.9],</span>
<span class="c1">##        [ 91.1, 152.7,  33.5,  33. ,  38.5, 125.5, 103.1],</span>
<span class="c1">##        [ 73. , 161.2,  37.4,  38. ,  31.8, 106.2,  92. ],</span>
<span class="c1">##        [ 61.7, 157.4,  38. ,  34.7,  29. , 101. ,  90.5],</span>
<span class="c1">##        [ 55.4, 154.6,  34.6,  34. ,  28.3,  92.5,  73.2],</span>
<span class="c1">##        [ 62. , 144.7,  32.5,  34.2,  29.8, 106.7,  84.8]])</span>
</pre></div>
</div>
<p>This is an extended version of the
National Health and Nutrition Examination Survey
(<a class="reference external" href="https://wwwn.cdc.gov/nchs/nhanes/search/datapage.aspx">NHANES</a>
dataset), where we are given
body measurements of adult females, in the following order:</p>
<ol class="simple">
<li><p>weight (kg),</p></li>
<li><p>standing height (cm),</p></li>
<li><p>upper arm length (cm),</p></li>
<li><p>upper leg length (cm),</p></li>
<li><p>arm circumference (cm),</p></li>
<li><p>hip circumference (cm),</p></li>
<li><p>waist circumference (cm).</p></li>
</ol>
<p>Unfortunately, <strong class="program">numpy</strong> matrices do not support column
naming, so these should be noted down separately elsewhere.
<strong class="program">pandas</strong> data frames  will
have that capability, but – as we have said above –
from the algebraic side, they are
not as convenient for the purpose of scientific computing as matrices.</p>
<div style="margin-top: 1em"></div><p>What we are dealing with is still a <strong class="program">numpy</strong> array:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
<span class="c1">## &lt;class &#39;numpy.ndarray&#39;&gt;</span>
</pre></div>
</div>
<p>however, this time a two-dimensional one:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">body</span><span class="o">.</span><span class="n">ndim</span>
<span class="c1">## 2</span>
</pre></div>
</div>
<p>which means that the <code class="docutils literal notranslate"><span class="pre">shape</span></code> slot will now be a tuple of length 2:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">body</span><span class="o">.</span><span class="n">shape</span>
<span class="c1">## (4221, 7)</span>
</pre></div>
</div>
<p>this gives the number of rows and columns, respectively.</p>
</div>
<div class="section" id="enumerating-elements">
<h3><span class="section-number">9.1.2. </span>Enumerating Elements<a class="headerlink" href="#enumerating-elements" title="Permalink to this headline">¶</a></h3>
<p><strong class="command">numpy.array</strong> can create a two-dimensional array based on a list
of lists or vectors of identical lengths.
Each of them will constitute a separate row of the resulting matrix.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
    <span class="p">[</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">4</span> <span class="p">],</span>
    <span class="p">[</span> <span class="mi">5</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">8</span> <span class="p">],</span>
    <span class="p">[</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span> <span class="p">]</span>
<span class="p">])</span>
<span class="c1">## array([[ 1,  2,  3,  4],</span>
<span class="c1">##        [ 5,  6,  7,  8],</span>
<span class="c1">##        [ 9, 10, 11, 12]])</span>
</pre></div>
</div>
<p>gives a 3-by-4 (3×4) matrix,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">])</span>
<span class="c1">## array([[1],</span>
<span class="c1">##        [2],</span>
<span class="c1">##        [3]])</span>
</pre></div>
</div>
<p>yields a 3-by-1 one (we call it a <em>column vector</em>,
but it is still a matrix — we’ll soon learn that shapes
can make a significant difference), and</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="p">])</span>
<span class="c1">## array([[1, 2, 3, 4]])</span>
</pre></div>
</div>
<p>produces a 1-by-4 array (a <em>row vector</em>).</p>
</div>
<div class="section" id="repeating-arrays">
<h3><span class="section-number">9.1.3. </span>Repeating  Arrays<a class="headerlink" href="#repeating-arrays" title="Permalink to this headline">¶</a></h3>
<p>The previously mentioned <strong class="command">numpy.tile</strong> and <strong class="command">numpy.repeat</strong>
can also generate some nice matrices.
Consider the following examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="mi">4</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1">## array([[1, 2, 3],</span>
<span class="c1">##        [1, 2, 3],</span>
<span class="c1">##        [1, 2, 3],</span>
<span class="c1">##        [1, 2, 3]])</span>
</pre></div>
</div>
<p>Axis <code class="docutils literal notranslate"><span class="pre">0</span></code> (the first one) is the rowwise one.
Axis <code class="docutils literal notranslate"><span class="pre">1</span></code> (the second one) refers to the columns:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">([[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">]],</span> <span class="mi">3</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1">## array([[1, 1, 1],</span>
<span class="c1">##        [2, 2, 2],</span>
<span class="c1">##        [3, 3, 3],</span>
<span class="c1">##        [4, 4, 4]])</span>
</pre></div>
</div>
<p>Note the double square brackets which mean that we are
replicating a row or a column vector, not a flat vector.</p>
<div class="proof proof-type-exercise" id="id1">

    <div class="proof-title">
        <span class="proof-type">Exercise 9.1</span>
        
    </div><div class="proof-content">
<p>How to obtain the matrices of following kinds programmatically?</p>
<div class="math notranslate nohighlight">
\[\begin{split}\left[
\begin{array}{cc}
    1 &amp; 2 \\
    1 &amp; 2 \\
    1 &amp; 2 \\
    3 &amp; 4 \\
    3 &amp; 4 \\
    3 &amp; 4 \\
    3 &amp; 4 \\
\end{array}
\right], \qquad
\left[
\begin{array}{cccccccc}
    1 &amp; 2 &amp; 1 &amp; 2&amp; 1&amp; 2&amp; 1&amp; 2 \\
    1 &amp; 2 &amp; 1 &amp; 2&amp; 1&amp; 2&amp; 1&amp; 2 \\
    1 &amp; 2 &amp; 1 &amp; 2&amp; 1&amp; 2&amp; 1&amp; 2 \\
\end{array}
\right], \qquad
\left[
\begin{array}{ccccccc}
    1&amp; 1&amp; 1&amp; 2&amp; 2&amp; 2 &amp; 2 \\
    3&amp; 3&amp; 3&amp; 4&amp; 4&amp; 4 &amp; 4 \\
\end{array}
\right].\end{split}\]</div>
</div></div></div>
<div class="section" id="stacking-arrays">
<h3><span class="section-number">9.1.4. </span>Stacking  Arrays<a class="headerlink" href="#stacking-arrays" title="Permalink to this headline">¶</a></h3>
<p><strong class="command">numpy.column_stack</strong> and <strong class="command">numpy.row_stack</strong> take
a tuple of array-like objects and bind them column- or rowwisely
to form a single matrix:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">(([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">]))</span>
<span class="c1">## array([[10, 30, 50],</span>
<span class="c1">##        [20, 40, 60]])</span>
<span class="n">np</span><span class="o">.</span><span class="n">row_stack</span><span class="p">(([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">]))</span>
<span class="c1">## array([[10, 20],</span>
<span class="c1">##        [30, 40],</span>
<span class="c1">##        [50, 60]])</span>
<span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span>
    <span class="n">np</span><span class="o">.</span><span class="n">row_stack</span><span class="p">(([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">])),</span>
    <span class="p">[</span><span class="mi">70</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">90</span><span class="p">]</span>
<span class="p">))</span>
<span class="c1">## array([[10, 20, 70],</span>
<span class="c1">##        [30, 40, 80],</span>
<span class="c1">##        [50, 60, 90]])</span>
</pre></div>
</div>
<div class="proof proof-type-exercise" id="id2">

    <div class="proof-title">
        <span class="proof-type">Exercise 9.2</span>
        
    </div><div class="proof-content">
<p>Perform similar operations
using <strong class="command">numpy.append</strong>, <strong class="command">numpy.vstack</strong>, <strong class="command">numpy.hstack</strong>,
<strong class="command">numpy.concatenate</strong>, and (*) <strong class="command">numpy.c_</strong>.</p>
</div></div><div class="proof proof-type-exercise" id="id3">

    <div class="proof-title">
        <span class="proof-type">Exercise 9.3</span>
        
    </div><div class="proof-content">
<p>Using <strong class="command">numpy.insert</strong>,
and a new row/column at the beginning, end, and in the middle
of an array.</p>
</div></div></div>
<div class="section" id="other-functions">
<h3><span class="section-number">9.1.5. </span>Other Functions<a class="headerlink" href="#other-functions" title="Permalink to this headline">¶</a></h3>
<p>Many built-in functions allow for generating arrays
of arbitrary shapes (not only vectors). For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">12345678</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>  <span class="c1"># not: rand((3, 4))</span>
<span class="c1">## array([[0.24580423, 0.59642861, 0.35879163, 0.37891011],</span>
<span class="c1">##        [0.02445137, 0.23830957, 0.38793433, 0.68054104],</span>
<span class="c1">##        [0.83934083, 0.76073689, 0.2217416 , 0.06344161]])</span>
</pre></div>
</div>
<p>Similarly with <strong class="program">scipy</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">scipy.stats</span>
<span class="n">scipy</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">uniform</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="c1">## array([[-0.22055625, -0.27825863, -0.80586116, -0.48853833, -0.93119693],</span>
<span class="c1">##        [-0.60585732, -0.01827233, -0.69509149, -0.218041  , -0.26529402]])</span>
</pre></div>
</div>
<div class="proof proof-type-exercise" id="id4">

    <div class="proof-title">
        <span class="proof-type">Exercise 9.4</span>
        
    </div><div class="proof-content">
<p>Check out the following functions:
<strong class="command">numpy.eye</strong>, <strong class="command">numpy.diag</strong>, <strong class="command">numpy.zeros</strong>,
<strong class="command">numpy.ones</strong>, and <strong class="command">numpy.empty</strong>.</p>
</div></div></div>
</div>
<div class="section" id="reshaping-matrices">
<h2><span class="section-number">9.2. </span>Reshaping Matrices<a class="headerlink" href="#reshaping-matrices" title="Permalink to this headline">¶</a></h2>
<p>Let’s take an example 3-by-4 matrix:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
    <span class="p">[</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span>  <span class="mi">4</span> <span class="p">],</span>
    <span class="p">[</span> <span class="mi">5</span><span class="p">,</span>  <span class="mi">6</span><span class="p">,</span>  <span class="mi">7</span><span class="p">,</span>  <span class="mi">8</span> <span class="p">],</span>
    <span class="p">[</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span> <span class="p">]</span>
<span class="p">])</span>
</pre></div>
</div>
<p>Internally, a matrix is represented using a <em>long</em> flat vector
where elements are stored in
the row-major order (sometimes referred to as a C-style array,
as opposed to Fortran-style):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">.</span><span class="n">size</span>  <span class="c1"># total number of elements</span>
<span class="c1">## 12</span>
<span class="n">A</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>  <span class="c1"># the underlying array</span>
<span class="c1">## array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12])</span>
</pre></div>
</div>
<p>It is the <code class="docutils literal notranslate"><span class="pre">shape</span></code> slot that is causing the 12 elements be treated
if they were arranged on a 3 by 4 grid.
We can change it anytime without modifying the underlying
data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># a tuple of length 2</span>
<span class="n">A</span>
<span class="c1">## array([[ 1,  2,  3],</span>
<span class="c1">##        [ 4,  5,  6],</span>
<span class="c1">##        [ 7,  8,  9],</span>
<span class="c1">##        [10, 11, 12]])</span>
</pre></div>
</div>
<p>or even:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="p">)</span>  <span class="c1"># a tuple of length 1</span>
<span class="n">A</span>
<span class="c1">## array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12])</span>
</pre></div>
</div>
<div style="margin-top: 1em"></div><p>For convenience, there is also the <strong class="command">reshape</strong> method
that returns a modified version of the object it is applied on:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="c1">## array([[ 1,  2,  3,  4,  5,  6],</span>
<span class="c1">##        [ 7,  8,  9, 10, 11, 12]])</span>
</pre></div>
</div>
<p>Here, “<code class="docutils literal notranslate"><span class="pre">-1</span></code>” means that <strong class="program">numpy</strong> must deduce by itself how many rows
we actually want in the result (12 elements are supposed
to be arranged in 6 columns, so the maths behind it is not rocket science).</p>
<p>Another example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">A</span>
<span class="c1">## array([[0. , 0.1, 0.2, 0.3, 0.4],</span>
<span class="c1">##        [0.5, 0.6, 0.7, 0.8, 0.9],</span>
<span class="c1">##        [1. , 1.1, 1.2, 1.3, 1.4],</span>
<span class="c1">##        [1.5, 1.6, 1.7, 1.8, 1.9]])</span>
</pre></div>
</div>
<div style="margin-top: 1em"></div><p>We should also note that reshaping is not the same
as matrix <em>transpose</em>, which also changes the order of elements:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span><span class="o">.</span><span class="n">T</span>  <span class="c1"># transpose</span>
<span class="c1">## array([[0. , 0.5, 1. , 1.5],</span>
<span class="c1">##        [0.1, 0.6, 1.1, 1.6],</span>
<span class="c1">##        [0.2, 0.7, 1.2, 1.7],</span>
<span class="c1">##        [0.3, 0.8, 1.3, 1.8],</span>
<span class="c1">##        [0.4, 0.9, 1.4, 1.9]])</span>
</pre></div>
</div>
<p>Here, the rows became columns and vice versa.</p>
</div>
<div class="section" id="mathematical-notion">
<h2><span class="section-number">9.3. </span>Mathematical Notion<a class="headerlink" href="#mathematical-notion" title="Permalink to this headline">¶</a></h2>
<p>Here is some standalone mathematical notation that we shall
be employing.
An <em>n</em> by <em>m</em> (<span class="math notranslate nohighlight">\(n\times m\)</span>)-matrix <span class="math notranslate nohighlight">\(\mathbf{X}\)</span> can be written as</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\mathbf{X}=
\left[
\begin{array}{cccc}
x_{1,1} &amp; x_{1,2} &amp; \cdots &amp; x_{1,m} \\
x_{2,1} &amp; x_{2,2} &amp; \cdots &amp; x_{2,m} \\
\vdots &amp; \vdots &amp; \ddots &amp; \vdots \\
x_{n,1} &amp; x_{n,2} &amp; \cdots &amp; x_{n,m} \\
\end{array}
\right].
\end{split}\]</div>
<p>Mathematically, we denote this as <span class="math notranslate nohighlight">\(\mathbf{X}\in\mathbb{R}^{n\times m}\)</span>.
Looking at the above, if this makes us think of how data are
displayed in spreadsheets, we are correct, because
the latter were inspired by the former.</p>
<p>We see that
<span class="math notranslate nohighlight">\(x_{i,j}\in\mathbb{R}\)</span> denotes
the element in the <span class="math notranslate nohighlight">\(i\)</span>-th row (e.g., the <span class="math notranslate nohighlight">\(i\)</span>-th <em>observation</em>)
and the <span class="math notranslate nohighlight">\(j\)</span>-th column (e.g., the <span class="math notranslate nohighlight">\(j\)</span>-th <em>feature</em> or <em>variable</em>), for every
<span class="math notranslate nohighlight">\(i=1,\dots,n\)</span>, <span class="math notranslate nohighlight">\(j=1,\dots,m\)</span>.</p>
<div style="margin-top: 1em"></div><p>Additionally, will sometimes use the following notations to emphasise
that <span class="math notranslate nohighlight">\(\mathbf{X}\)</span> consists of <span class="math notranslate nohighlight">\(n\)</span> rows or <span class="math notranslate nohighlight">\(m\)</span> columns:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\mathbf{X}
=
\left[
\begin{array}{cccc}
\mathbf{x}_{\cdot,1} &amp;
\mathbf{x}_{\cdot,2} &amp;
\cdots &amp;
\mathbf{x}_{\cdot,m} \\
\end{array}
\right]
=
\left[
\begin{array}{c}
\mathbf{x}_{1,\cdot} \\
\mathbf{x}_{2,\cdot} \\
\vdots\\
\mathbf{x}_{n,\cdot} \\
\end{array}
\right]
=
\left[
\begin{array}{cccc}
\mathbf{x}_{1,\cdot} &amp;
\mathbf{x}_{2,\cdot} &amp;
\cdots &amp;
\mathbf{x}_{n,\cdot} \\
\end{array}
\right]^T,
\end{split}\]</div>
<p>where <span class="math notranslate nohighlight">\(\cdot^T\)</span> denotes the <em>transpose</em> of a given matrix
(thanks to which we can save some vertical space, we don’t
want this book be 1000 pages long, do we?).</p>
<p>Here, <span class="math notranslate nohighlight">\(\mathbf{x}_{i,\cdot}\)</span> is a <em>row vector</em> of length <span class="math notranslate nohighlight">\(m\)</span>,
i.e., a <em>(1×m)</em>-matrix:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\mathbf{x}_{i,\cdot} = \left[
\begin{array}{cccc}
x_{i,1} &amp;
x_{i,2} &amp;
\cdots &amp;
x_{i,m} \\
\end{array}
\right].
\end{split}\]</div>
<p>Moreover, <span class="math notranslate nohighlight">\(\mathbf{x}_{\cdot,j}\)</span> is a <em>column vector</em> of length <span class="math notranslate nohighlight">\(n\)</span>,
i.e., an <em>(n×1)</em>-matrix:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\mathbf{x}_{\cdot,j} = \left[
\begin{array}{cccc}
x_{1,j} &amp;
x_{2,j} &amp;
\cdots &amp;
x_{n,j} \\
\end{array}
\right]^T=\left[
\begin{array}{c}
{x}_{1,j} \\
{x}_{2,j} \\
\vdots\\
{x}_{n,j} \\
\end{array}
\right].
\end{split}\]</div>
<div style="margin-top: 1em"></div><p>Also, recall that we are used to denoting
a <em>vector</em> of length <span class="math notranslate nohighlight">\(m\)</span> with <span class="math notranslate nohighlight">\(\boldsymbol{x}=(x_1, \dots, x_m)\)</span>.
A vector is 1-, not 2-dimensional, hence a slightly different
notation in the case where ambiguity can lead to some
trouble.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>In <a class="reference internal" href="240-transform-uni.html#chap-transform-uni"><span class="std std-numref">Chapter 7</span></a>
we will see that often <strong class="program">numpy</strong> will automatically
treat length-<em>m</em> vectors as if they were row vectors,
i.e., matrices of size <em>1×m</em>.
For the column vector behaviour, we will need to reshape them
manually.</p>
</div>
</div>
<div class="section" id="questions">
<h2><span class="section-number">9.4. </span>Questions<a class="headerlink" href="#questions" title="Permalink to this headline">¶</a></h2>
<div class="proof proof-type-exercise" id="id5">

    <div class="proof-title">
        <span class="proof-type">Exercise 9.5</span>
        
    </div><div class="proof-content">
<p>What is the difference between
<code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code>, <code class="docutils literal notranslate"><span class="pre">[[1,</span> <span class="pre">2,</span> <span class="pre">3]]</span></code> and <code class="docutils literal notranslate"><span class="pre">[[1],</span> <span class="pre">[2],</span> <span class="pre">[3]]</span></code> in the context
of array creation?</p>
</div></div><div class="proof proof-type-exercise" id="id6">

    <div class="proof-title">
        <span class="proof-type">Exercise 9.6</span>
        
    </div><div class="proof-content">
<p>If <code class="docutils literal notranslate"><span class="pre">A</span></code> is a matrix with 5 rows and 6 columns,
what is the difference between <code class="docutils literal notranslate"><span class="pre">A.reshape(6,</span> <span class="pre">5)</span></code> and <code class="docutils literal notranslate"><span class="pre">A.T</span></code>?</p>
</div></div><div class="proof proof-type-exercise" id="id7">

    <div class="proof-title">
        <span class="proof-type">Exercise 9.7</span>
        
    </div><div class="proof-content">
<p>If <code class="docutils literal notranslate"><span class="pre">A</span></code> is a matrix with 5 rows and 6 columns,
what is the meaning of:
<code class="docutils literal notranslate"><span class="pre">A.reshape(-1)</span></code>, <code class="docutils literal notranslate"><span class="pre">A.reshape(3,</span> <span class="pre">-1)</span></code>,
<code class="docutils literal notranslate"><span class="pre">A.reshape(-1,</span> <span class="pre">3)</span></code>, <code class="docutils literal notranslate"><span class="pre">A.reshape(-1,</span> <span class="pre">-1)</span></code>,
<code class="docutils literal notranslate"><span class="pre">A.shape</span> <span class="pre">=</span> <span class="pre">(3,</span> <span class="pre">10)</span></code>, and <code class="docutils literal notranslate"><span class="pre">A.shape</span> <span class="pre">=</span> <span class="pre">(-1,</span> <span class="pre">3)</span></code>?</p>
</div></div><div class="proof proof-type-exercise" id="id8">

    <div class="proof-title">
        <span class="proof-type">Exercise 9.8</span>
        
    </div><div class="proof-content">
<p>List some methods to add a new row to an existing matrix.</p>
</div></div></div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="320-transform-multi.html" class="btn btn-neutral float-right" title="10. 🚧 Transforming, Aggregating, and Filtering Multidimensional Data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="250-distribution-uni.html" class="btn btn-neutral float-left" title="8. 🚧 Continuous Probability Distributions (**)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Marek Gagolewski. Licensed under CC BY-NC-ND 4.0.
      <span class="lastupdated">
        Last updated on 2022-04-01T15:41:11+1100.
      </span>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a>
    and a customised <a href="https://github.com/rtfd/sphinx_rtd_theme">rtd</a> theme.
    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>