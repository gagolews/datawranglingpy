<!DOCTYPE html>


<html class="writer-html5" lang="en" >
<!-- Copyright (C) 2020-2022, Marek Gagolewski <https://www.gagolewski.com> -->

<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>4. Unidimensional Numeric Data and Their Distribution &mdash; Minimalist Data Wrangling with Python by Marek Gagolewski</title>
  

  
  
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/proof.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  

  
  

  
    <link rel="canonical" href="https://datawranglingpy.gagolewski.com/chapter/210-vector.html" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/proof.js"></script>
        <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5. Aggregating Numeric Data" href="220-aggregate.html" />
    <link rel="prev" title="3. Sequential and Other Types in Python" href="130-sequential.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html"> Minimalist Data Wrangling with Python [DRAFTv0.2.1]
          

          
          </a>

          <div class="version">
          by <a style="color: inherit" href="https://www.gagolewski.com">Marek Gagolewski</a>
          </div>

<!--
          
            
            
              <div class="version">
                by Marek Gagolewski
              </div>
            
          
-->

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search phrase..." />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Start Here</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="000-preface.html">Preface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introducing Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="110-setup.html">1. Getting Started with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="120-scalar.html">2. Scalar Types and Control Structures in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="130-sequential.html">3. Sequential and Other Types in Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Unidimensional Data</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. Unidimensional Numeric Data and Their Distribution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-vectors-in-numpy">4.1. Creating Vectors in <strong class="program">numpy</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#enumerating-elements">4.1.1. Enumerating Elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#arithmetic-progressions">4.1.2. Arithmetic Progressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#repeating-values">4.1.3. Repeating Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-pseudorandom-variates">4.1.4. Generating Pseudorandom Variates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loading-data-from-files">4.1.5. Loading Data from Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#numpy-r">4.1.6. <strong class="command">numpy.r_</strong> (*)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mathematical-notation">4.2. Mathematical Notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#histograms">4.3. Histograms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#heights-a-bell-shaped-distribution">4.3.1. <code class="docutils literal notranslate"><span class="pre">heights</span></code> – A Bell-Shaped Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="#income-a-right-skewed-distribution">4.3.2. <code class="docutils literal notranslate"><span class="pre">income</span></code> – A Right-Skewed Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="#marathon-up-to-3-hours-a-left-skewed-distribution">4.3.3. <code class="docutils literal notranslate"><span class="pre">marathon</span></code> (up to 3 hours) – A Left-Skewed Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-many-bins">4.3.4. How Many Bins?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manual-binning">4.3.5. Manual Binning (*)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#peds-a-bimodal-distribution-already-binned">4.3.6. <code class="docutils literal notranslate"><span class="pre">peds</span></code> – A Bimodal Distribution (Already Binned)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#matura-a-bell-shaped-distribution-almost">4.3.7. <code class="docutils literal notranslate"><span class="pre">matura</span></code> – A Bell-Shaped Distribution (Almost)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cumulative-counts-and-the-empirical-cumulative-distribution-function">4.4. Cumulative Counts and the Empirical Cumulative Distribution Function (*)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#log-scale-and-heavy-tailed-distributions">4.5. Log-scale and Heavy-Tailed Distributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exercises">4.6. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="220-aggregate.html">5. Aggregating Numeric Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="230-transform-vector.html">6. Transforming and Filtering Numeric Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="240-distribution-uni.html">7. Continuous Probability Distributions (*)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Multidimensional Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="310-matrix.html">8. Multidimensional Numeric Data at a Glance</a></li>
<li class="toctree-l1"><a class="reference internal" href="320-transform-matrix.html">9. Transforming, Aggregating, and Filtering Multidimensional Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="330-corelation.html">10. 🚧 Exploring Relationships Between Variables</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Heterogeneous Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="410-dataframe.html">11. Introducing Data Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="420-categorical.html">12. Handling Categorical Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="430-groupby.html">13. 🚧 Processing Data in Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="440-sql.html">14. Accessing Databases</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Text and Other Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="510-text.html">15. Working with Text Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="520-regex.html">16. Regular Expressions (*)</a></li>
<li class="toctree-l1"><a class="reference internal" href="530-missingness.html">17. Outliers, Missing, Censored, and Incorrect Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="540-time.html">18. Time Series</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="998-changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="999-bibliography.html">Bibliography</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://datawranglingpy.gagolewski.com/datawranglingpy.pdf">This Book in PDF</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/datawranglingpy/blob/master/CODE_OF_CONDUCT.md">Report Bugs or Typos</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/teaching_data">Datasets</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.gagolewski.com">Author</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Minimalist Data Wrangling with Python [DRAFTv0.2.1]</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          



















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">4. </span>Unidimensional Numeric Data and Their Distribution</li>
    
    
      <li class="wy-breadcrumbs-aside">

        
        
        <a class="github-button" href="https://github.com/gagolews/datawranglingpy" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star gagolews/datawranglingpy on GitHub">Star</a>
        


        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="220-aggregate.html" class="btn btn-neutral float-right" title="5. Aggregating Numeric Data" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="130-sequential.html" class="btn btn-neutral float-left" title="3. Sequential and Other Types in Python" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="tex2jax_ignore mathjax_ignore section" id="unidimensional-numeric-data-and-their-distribution">
<span id="chap-vector"></span><h1><span class="section-number">4. </span>Unidimensional Numeric Data and Their Distribution<a class="headerlink" href="#unidimensional-numeric-data-and-their-distribution" title="Permalink to this headline"></a></h1>
<blockquote>
<div><p><em>This is an early draft of</em> Minimalist Data Wrangling with Python <em>by
<a class="reference external" href="https://www.gagolewski.com">Marek Gagolewski</a>. It’s distributed
in the hope that it’ll be useful. Any
<a class="reference external" href="https://github.com/gagolews/datawranglingpy/blob/master/CODE_OF_CONDUCT.md">bug/typos reports/fixes</a>
are appreciated. Although available online, this is a whole course,
and should be read from the beginning to the end. In particular,
refer to the <a class="reference internal" href="000-preface.html#chap-preface"><span class="std std-ref">Preface</span></a> for general introductory remarks.</em></p>
</div></blockquote>
<p>Let’s assume that we have dozens of data points at hand, representing some
measurements, such as sensor readings for some industrial processes,
body measures for patients in a clinic, salaries of employees,
sizes of cities, etc.</p>
<p>For instance, consider the heights of adult females (&gt;= 18 years old, in cm)
in the longitudinal study
called National Health and Nutrition Examination Survey
(<a class="reference external" href="https://wwwn.cdc.gov/nchs/nhanes/search/datapage.aspx">NHANES</a>)
conducted by the US Centres for Disease Control and Prevention.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">heights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/gagolews/&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;teaching_data/master/marek/nhanes_adult_female_height_2020.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Let’s preview a few first observations:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">heights</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span>  <span class="c1"># first six</span>
<span class="c1">## array([160.2, 152.7, 161.2, 157.4, 154.6, 144.7])</span>
</pre></div>
</div>
<p>This is an example of <em>quantitative</em> (numeric) data
in form of a series of numbers on which it makes sense
to apply various mathematical operations such as subtraction,
division, taking logarithms, comparing which one is greater than the other,
and so forth.</p>
<p>Most importantly, here, all the observations are <em>independent</em>
of each other; the ordering of values does not matter.</p>
<p>Our data sample
consists 4221 points on the real line (a “bag” of points),
see <a class="reference internal" href="#fig-heights-jitter"><span class="std std-numref">Figure 4.1</span></a>,
but merely looking at the numbers themselves tells us nothing.
There are too many of them.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">heights</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">heights</span><span class="p">)),</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;|&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;(jitter)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">([])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="id3">
<span id="fig-heights-jitter"></span><img alt="../_images/heights-jitter-1.png" src="../_images/heights-jitter-1.png" />
<p class="caption"><span class="caption-number">Figure 4.1 </span><span class="caption-text">The <code class="docutils literal notranslate"><span class="pre">heights</span></code> dataset is comprised of independent points on the real like; we’ve added some jitter on the y-axis for more readability only</span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</div>
<p>In this chapter we introduce basic ways to create vectors in the
<strong class="program">numpy</strong> package, which are an efficient data structure for
storing and operating on numeric data just like the ones above.
Then, we discuss some basic tools for inspecting their the distribution.</p>
<div class="section" id="creating-vectors-in-numpy">
<h2><span class="section-number">4.1. </span>Creating Vectors in <strong class="program">numpy</strong><a class="headerlink" href="#creating-vectors-in-numpy" title="Permalink to this headline"></a></h2>
<p><a class="reference external" href="https://numpy.org/doc/stable/reference/index.html"><strong class="program">numpy</strong></a>
is an open source add-on for numerical  computing
written by Travis Oliphant and other developers
in 2005 (although the project has a much longer
<a class="reference external" href="https://scipy.github.io/old-wiki/pages/History_of_SciPy">history</a>
and stands on the shoulders of many giants
(e.g., concepts from the
<a class="reference external" href="https://en.wikipedia.org/wiki/APL_%5C(programming_language%5C)">APL</a> and
<a class="reference external" href="https://en.wikipedia.org/wiki/Fortran">Fortran</a> languages).
It adds support for multi-dimensional arrays
and numerous operations on them,
similar to those available in R, S, MATLAB, GNU Octave, Scilab, Julia,
Perl (via <strong class="program">Perl Data Language</strong>),
and some numerical analysis libraries such as <strong class="program">LAPACK</strong>,
<strong class="program">GNU GSL</strong>, etc.</p>
<p>Many other packages are built on top of <strong class="program">numpy</strong>
(including <strong class="program">scipy</strong>, <strong class="program">pandas</strong>, and <strong class="program">sklearn</strong>),
hence our studying it in very detail is utterly important.
In particular, whatever we learn  about vectors here
will be transferable to the case of the processing of data frame columns.</p>
<div style="margin-top: 1em"></div><p>Recall that Python lists, e.g., <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code>, represent simple sequences of
objects of any kind.
Their use cases are very broad, which is both an advantage
and something quite the opposite.</p>
<p><em>Vectors</em> in <strong class="program">numpy</strong> are 1-dimensional arrays which
are like lists, but on steroids, which make them strong
at scientific computing.</p>
<p>A vector of length <em>n</em> will often be used to represent
a point in an <em>n</em> dimensional space (for example, GPS coordinates
of a place on Earth assume <em>n=2</em>)
or <em>n</em> readings of some 1-dimensional quantity
(e.g., recorded heights of <em>n</em> people).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>(*) <strong class="program">numpy</strong> vectors are powerful because of the underlying assumption
that each object they store is of the same type. Although it is possible
to save references to arbitrary objects therein, in majority of the cases
we will be dealing with vectors of logical values, integers, and
floating-point numbers.</p>
<p>Those are directly representable as simple arrays in the C programming language,
in which <strong class="program">numpy</strong> is written. Hence, operations on vectors will be very fast
provided that we are using the functions working on them <em>as a whole</em>.
Hence, the readers having some background in other lower-level
languages, will need to change their habits
of processing individual elements in a sequence, e.g., by means of a <strong class="command">for</strong>
loop.</p>
</div>
<p>It is customary to import the <strong class="program">numpy</strong> package under the <code class="docutils literal notranslate"><span class="pre">np</span></code> alias:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
<p>Hence, we can now refer to objects defined therein as
<code class="docutils literal notranslate"><span class="pre">np.spam</span></code>, <code class="docutils literal notranslate"><span class="pre">np.bacon</span></code>, or <code class="docutils literal notranslate"><span class="pre">np.spam</span></code>.</p>
<div class="section" id="enumerating-elements">
<h3><span class="section-number">4.1.1. </span>Enumerating Elements<a class="headerlink" href="#enumerating-elements" title="Permalink to this headline"></a></h3>
<p>One way to create a vector is by calling the <strong class="command">numpy.array</strong> function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">])</span>
<span class="n">x</span>
<span class="c1">## array([10, 20, 30, 40, 50, 60])</span>
</pre></div>
</div>
<p>Note that the vector elements were specified by means of an ordinary list.
Ranges and tuples can also be used as content providers,
which the kind reader is encouraged to check themself.</p>
<div style="margin-top: 1em"></div><p>The length of the vector can either be read using the previously mentioned
<code class="docutils literal notranslate"><span class="pre">len</span></code> function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## 6</span>
</pre></div>
</div>
<p>or by reading the array’s <code class="docutils literal notranslate"><span class="pre">shape</span></code> slot:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="o">.</span><span class="n">shape</span>
<span class="c1">## (6,)</span>
</pre></div>
</div>
<div style="margin-top: 1em"></div><p>Note that a vector is a 1-dimensional array, hence its shape is stored
as a tuple of length 1 (the number of dimensions is stored as <code class="docutils literal notranslate"><span class="pre">x.ndim</span></code>).
We can get its length by accessing <code class="docutils literal notranslate"><span class="pre">x.shape[0]</span></code>.</p>
<p>On a side note, matrices (2-dimensional arrays), which we shall study later,
will be of shape like <code class="docutils literal notranslate"><span class="pre">(number_of_rows,</span> <span class="pre">number_of_columns)</span></code>.</p>
<div style="margin-top: 1em"></div><p>All vector elements are generally of the same type. Above
we have a sequence of integers:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="o">.</span><span class="n">dtype</span>  <span class="c1"># data type</span>
<span class="c1">## dtype(&#39;int64&#39;)</span>
</pre></div>
</div>
<div style="margin-top: 1em"></div><p>However, logical, float, complex, but also string vectors are possible too:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">])</span>
<span class="c1">## array([ True, False, False,  True])</span>
<span class="n">x</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>  <span class="c1"># or np.array(x, dtype=float)</span>
<span class="c1">## array([10., 20., 30., 40., 50., 60.])</span>
<span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot;spam&quot;</span><span class="p">,</span> <span class="s2">&quot;spam&quot;</span><span class="p">,</span> <span class="s2">&quot;bacon&quot;</span><span class="p">,</span> <span class="s2">&quot;spam&quot;</span><span class="p">])</span>
<span class="c1">## array([&#39;spam&#39;, &#39;spam&#39;, &#39;bacon&#39;, &#39;spam&#39;], dtype=&#39;&lt;U5&#39;)</span>
</pre></div>
</div>
<p>The in last example we have an array of strings in Unicode
(i.e., capable of storing any character in any alphabet,
emojis, mathematical symbols, etc.),
each of no more than 5 code points in length.
It is important to know this, because, as we will point out
in <a class="reference internal" href="510-text.html#chap-text"><span class="std std-numref">Chapter 15</span></a>, replacing any element with new content will
result in the too long strings’ truncation. This can be remedied by calling
<code class="docutils literal notranslate"><span class="pre">x.astype(&quot;&lt;U10&quot;)</span></code>, for example.</p>
</div>
<div class="section" id="arithmetic-progressions">
<h3><span class="section-number">4.1.2. </span>Arithmetic Progressions<a class="headerlink" href="#arithmetic-progressions" title="Permalink to this headline"></a></h3>
<p><strong class="program">numpy</strong>’s <strong class="command">arange</strong> is similar to the built-in
<strong class="command">range</strong>, but outputs a vector:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1">## array([0, 2, 4, 6, 8])</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">linspace</span></code> (<em>linear space</em>) creates a sequence of equidistant points
in a given interval:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="c1">## array([0.  , 0.25, 0.5 , 0.75, 1.  ])</span>
</pre></div>
</div>
<div class="proof proof-type-exercise" id="id4">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.1</span>
        
    </div><div class="proof-content">
<p>Call <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(np.linspace)</span></code> and study the meaning of the
<code class="docutils literal notranslate"><span class="pre">endpoint</span></code> argument.
Also, find the same documentation page at the <strong class="program">numpy</strong> project’s
<a class="reference external" href="https://numpy.org/doc/stable/reference/index.html">website</a>.
Another way is to use your favourite search engine such as
DuckDuckGo and query “<code class="docutils literal notranslate"><span class="pre">linspace</span> <span class="pre">site:numpy.org</span></code>”.
Always remember to gather information from first hand sources!
If you are serious about data science in Python,
you will become a frequent visitor at this page (and similar ones).
In particular, every so often it’s a good idea to check out for
significant updates at <a class="reference external" href="https://numpy.org/news/">https://numpy.org/news/</a>.</p>
</div></div></div>
<div class="section" id="repeating-values">
<h3><span class="section-number">4.1.3. </span>Repeating Values<a class="headerlink" href="#repeating-values" title="Permalink to this headline"></a></h3>
<p><strong class="command">numpy.repeat</strong> repeats <em>each</em> value a number of times:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="c1">## array([5, 5, 5, 5, 5, 5])</span>
<span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
<span class="c1">## array([1, 1, 1, 2, 2, 2])</span>
<span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="c1">## array([1, 1, 1, 2, 2, 2, 2, 2])</span>
</pre></div>
</div>
<p>Here, each element from the 1st argument
was repeated the <em>corresponding</em> number of times,
as defined by the 2nd argument.</p>
<p><strong class="command">numpy.tile</strong>, on the other hand, repeats a whole sequence
with <em>recycling</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
<span class="c1">## array([1, 2, 1, 2, 1, 2])</span>
</pre></div>
</div>
<p>See also <strong class="command">numpy.zeros</strong> and <strong class="command">numpy.ones</strong> for
some specialised versions of the above.</p>
</div>
<div class="section" id="generating-pseudorandom-variates">
<h3><span class="section-number">4.1.4. </span>Generating Pseudorandom Variates<a class="headerlink" href="#generating-pseudorandom-variates" title="Permalink to this headline"></a></h3>
<p>The <strong class="program">numpy.random</strong> module defines many functions to generate
pseudorandom numbers. We will be discussing the reason
for our using the <em>pseudo</em> prefix together with various probability
distributions in a further part, so let’s now just quickly take
note of a way to sample from the uniform distribution on the unit interval:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="c1">## array([0.49340194, 0.41614605, 0.69780667, 0.45278338, 0.84061215])</span>
</pre></div>
</div>
<p>and picking values from a given set:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1">## array([1, 5, 8])</span>
</pre></div>
</div>
<p>This gave 3 values from the set <em>{1, 2, …, 9}</em>, without replacement
(so that all the numbers are unique).</p>
</div>
<div class="section" id="loading-data-from-files">
<h3><span class="section-number">4.1.5. </span>Loading Data from Files<a class="headerlink" href="#loading-data-from-files" title="Permalink to this headline"></a></h3>
<p>We will usually  be reading whole heterogeneous tabular data sets
using <strong class="command">pandas.read_csv</strong> being the topic we shall cover
in <a class="reference internal" href="410-dataframe.html#chap-dataframe"><span class="std std-numref">Chapter 11</span></a>.</p>
<p>It is worth knowing, though, that arrays with elements of the
same type can be read efficiently from
text (e.g., CSV) files using <strong class="command">numpy.loadtxt</strong>,
for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">heights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/gagolews/&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;teaching_data/master/marek/nhanes_adult_female_height_2020.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="proof proof-type-exercise" id="id5">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.2</span>
        
    </div><div class="proof-content">
<p>Use <strong class="command">numpy.loadtxt</strong> to read the dataset located
at <a class="reference external" href="https://github.com/gagolews/teaching_data/blob/master/marek/population_largest_cities_unnamed.txt">https://github.com/gagolews/teaching_data/blob/master/marek/population_largest_cities_unnamed.txt</a>
(click <em>Raw</em> to get access to its contents).</p>
</div></div></div>
<div class="section" id="numpy-r">
<h3><span class="section-number">4.1.6. </span><strong class="command">numpy.r_</strong> (*)<a class="headerlink" href="#numpy-r" title="Permalink to this headline"></a></h3>
<p><strong class="command">numpy.r_</strong> is perhaps the most flexible means for
creating vectors involving quite a few of the aforementioned scenarios,
however it has a quirky syntax.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">]</span>
<span class="c1">## array([ 1.,  2.,  3., nan,  5., inf])</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">nan</span></code> stands for a <em>not-a-number</em> and is used as a placeholder
for missing values (discussed later) or <em>wrong</em> results,
such as the square root of -1 in the domain of reals.
<code class="docutils literal notranslate"><span class="pre">inf</span></code>, on the other hand, means <em>infinity</em>, <span class="math notranslate nohighlight">\(\infty\)</span>.</p>
<p>We see that square brackets are used instead of the round ones.
This is actually smart, because we’ve mentioned that slices
(`<strong class="command">:</strong>`) can only be used inside them. And so they can:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># like np.arange(0, 10, 2)</span>
<span class="c1">## array([0, 2, 4, 6, 8])</span>
</pre></div>
</div>
<p>What’s more, <strong class="program">numpy</strong> authors added the following syntactic sugar:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="mi">5</span><span class="n">j</span><span class="p">]</span>  <span class="c1"># like np.linspace(0, 1, 5)</span>
<span class="c1">## array([0.  , 0.25, 0.5 , 0.75, 1.  ])</span>
</pre></div>
</div>
<p>Finally, note that we can combine many chunks into one:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span><span class="mi">3</span><span class="n">j</span><span class="p">]</span>
<span class="c1">## array([1. , 2. , 3. , 3. , 0. , 1. , 2. , 0. , 1.5, 3. ])</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="mathematical-notation">
<h2><span class="section-number">4.2. </span>Mathematical Notation<a class="headerlink" href="#mathematical-notation" title="Permalink to this headline"></a></h2>
<p>Mathematically, we will be denoting number sequences
with <span class="math notranslate nohighlight">\(\boldsymbol{x}=(x_1, x_2, \dots, x_n)\)</span>,
where <span class="math notranslate nohighlight">\(x_i\)</span> is the <span class="math notranslate nohighlight">\(i\)</span>-th element therein and <span class="math notranslate nohighlight">\(n\)</span>
is the size of the sample.
The bold font (hopefully visible) is to emphasise that <span class="math notranslate nohighlight">\(\boldsymbol{x}\)</span>
is not an atomic entity (<span class="math notranslate nohighlight">\(x\)</span>), but rather a collection thereof.</p>
<p>For brevity, instead of saying “let <span class="math notranslate nohighlight">\(\boldsymbol{x}\)</span>
be a real-valued sequence (or a vector – in many contexts
this is synonymous) of length <span class="math notranslate nohighlight">\(n\)</span>”,
we shall write “let <span class="math notranslate nohighlight">\(\boldsymbol{x}\in\mathbb{R}^n\)</span>”.
Here, the “<span class="math notranslate nohighlight">\(\in\)</span>” symbol  stand for “<em>is in</em>” or
“<em>is a member of</em>” and
<span class="math notranslate nohighlight">\(\mathbb{R}\)</span> denotes the set of real numbers.</p>
<p>Mathematical notation is pleasantly <em>abstract</em> (general)
in the sense that <span class="math notranslate nohighlight">\(\boldsymbol{x}\)</span> can be anything,
e.g., data on the incomes of households,
sizes of the largest cities in a given country,
or heights of participants in a study.</p>
<p>Using the programming syntax,
<span class="math notranslate nohighlight">\(n\)</span> corresponds to <code class="docutils literal notranslate"><span class="pre">len(x)</span></code> or equivalently <code class="docutils literal notranslate"><span class="pre">x.shape[0]</span></code>
and <span class="math notranslate nohighlight">\(x_i\)</span> is <code class="docutils literal notranslate"><span class="pre">x[i-1]</span></code> (because the first element is at index 0).</p>
<div style="margin-top: 1em"></div><p>Furthermore, by <span class="math notranslate nohighlight">\(x_{(i)}\)</span> (note the bracket)
we will denote the <span class="math notranslate nohighlight">\(i\)</span>-th smallest value in <span class="math notranslate nohighlight">\(\boldsymbol{x}\)</span>
(some textbooks denote it with <span class="math notranslate nohighlight">\(x_{i:n}\)</span>, but we will not).
In particular, <span class="math notranslate nohighlight">\(x_{(1)}\)</span> is the minimum
and <span class="math notranslate nohighlight">\(x_{(n)}\)</span> is the maximum.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>  <span class="c1"># just an example</span>
<span class="n">x_sorted</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">x_sorted</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x_sorted</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># the minimum and the maximum</span>
<span class="c1">## (1, 5)</span>
</pre></div>
</div>
<p>We shall sometimes be referring to <span class="math notranslate nohighlight">\(x_{(i)}\)</span> as the <span class="math notranslate nohighlight">\(i\)</span>-th <em>order statistic</em>.</p>
<p>Also, for to avoid the clutter of notation,
in certain formulas we will be assuming that
<span class="math notranslate nohighlight">\(x_{(0)}\)</span> is the same as <span class="math notranslate nohighlight">\(x_{(1)}\)</span>
and <span class="math notranslate nohighlight">\(x_{(n+1)}\)</span> is equivalent to <span class="math notranslate nohighlight">\(x_{(n)}\)</span>.</p>
</div>
<div class="section" id="histograms">
<h2><span class="section-number">4.3. </span>Histograms<a class="headerlink" href="#histograms" title="Permalink to this headline"></a></h2>
<p><em>Histograms</em> are one of the most
intuitive tools for depicting the empirical distribution of a
data sample.
We’ll be drawing them using the statistical data visualisation
package called <a class="reference external" href="https://seaborn.pydata.org"><strong class="program">seaborn</strong></a>
<span id="id1">[<a class="reference internal" href="999-bibliography.html#id44">Was21</a>]</span> (written by Michael Waskom),
which was built on top of the classic plotting library
<a class="reference external" href="https://matplotlib.org/"><strong class="program">matplotlib</strong></a> <span id="id2">[<a class="reference internal" href="999-bibliography.html#id43">Hun07</a>]</span>
(originally developed by John D. Hunter).
Let’s import both packages and set their traditional aliases:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We will frequently be calling a single
function from <strong class="program">seaborn</strong> and then performing a series
of additional calls to <strong class="program">matplotlib</strong> to tweak the
display details. It is important to remember that the former
uses the latter to achieve its goals, not the other way around.</p>
</div>
<div class="section" id="heights-a-bell-shaped-distribution">
<h3><span class="section-number">4.3.1. </span><code class="docutils literal notranslate"><span class="pre">heights</span></code> – A Bell-Shaped Distribution<a class="headerlink" href="#heights-a-bell-shaped-distribution" title="Permalink to this headline"></a></h3>
<p>Let’s draw a histogram for the <code class="docutils literal notranslate"><span class="pre">heights</span></code> dataset,
see <a class="reference internal" href="#fig-heights-histogram-bins11"><span class="std std-numref">Figure 4.2</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">heights</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="id6">
<span id="fig-heights-histogram-bins11"></span><img alt="../_images/heights-histogram-bins11-3.png" src="../_images/heights-histogram-bins11-3.png" />
<p class="caption"><span class="caption-number">Figure 4.2 </span><span class="caption-text">Histogram for the <code class="docutils literal notranslate"><span class="pre">heights</span></code> dataset</span><a class="headerlink" href="#id6" title="Permalink to this image"></a></p>
</div>
<p>The data were split into 11 bins and plotted in such a way that
bar heights are proportional to the number of observations
falling into each interval.</p>
<p>The bins are non-overlapping, adjacent to each other, and of equal lengths
and we can read their coordinates by looking at the bottom side of each
rectangular bar.</p>
<p>This distribution is bell-shaped – nicely symmetrical around
about 160 cm. It resembles a <em>normal</em> distribution (which we cover
in <a class="reference internal" href="240-distribution-uni.html#chap-distribution-uni"><span class="std std-numref">Chapter 7</span></a>) – the most typical (<em>normal</em>) observations
are somewhere in the middle, and the probability mass decreases quickly.
We will learn that, for instance, observations outside the (more or less)
<em>[139, 181]</em> interval (mean ± 3 standard deviations – the 3σ rule)
are very rare (less than 1% probability).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For some of us, a normal distribution is a prototypical one – we
think of many phenomena to be distributed in this way.
And that is indeed the case, e.g., in psychology (IQ or
personality tests), physiology (the above heights), or
when measuring stuff with not-so-precise devices (distribution of errors).</p>
<p>(*) In fact, we have a strong mathematical result saying
that the sum or average of many observations,
assuming that they are independent
and follow the same (any!) distribution with finite variance,
is approximately normally distributed (the central limit theorem).
This is a very strong result.</p>
<p>We might be tempted to think now that everything is normally
distributed, but this is very much untrue.</p>
</div>
</div>
<div class="section" id="income-a-right-skewed-distribution">
<h3><span class="section-number">4.3.2. </span><code class="docutils literal notranslate"><span class="pre">income</span></code> – A Right-Skewed Distribution<a class="headerlink" href="#income-a-right-skewed-distribution" title="Permalink to this headline"></a></h3>
<p>Let us therefore consider another dataset.
In <a class="reference internal" href="#fig-income-histogram-bins20"><span class="std std-numref">Figure 4.3</span></a> we depict
the distribution of a simulated sample of disposable
income (financial year ending 2020)
of 1000 randomly chosen UK households, in £
(of course, the UK Office for National Statistics does not provide
us with details on each tax payer, for privacy and other reasons,
hence we needed to recreate it based on data from
this <a class="reference external" href="https://www.ons.gov.uk/peoplepopulationandcommunity/personalandhouseholdfinances/incomeandwealth/bulletins/householddisposableincomeandinequality/financialyear2020">report</a>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">income</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/gagolews/&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;teaching_data/master/marek/uk_income_simulated_2020.txt&quot;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">income</span><span class="p">,</span> <span class="n">stat</span><span class="o">=</span><span class="s2">&quot;percent&quot;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="id7">
<span id="fig-income-histogram-bins20"></span><img alt="../_images/income-histogram-bins20-5.png" src="../_images/income-histogram-bins20-5.png" />
<p class="caption"><span class="caption-number">Figure 4.3 </span><span class="caption-text">Histogram for the <code class="docutils literal notranslate"><span class="pre">income</span></code> dataset</span><a class="headerlink" href="#id7" title="Permalink to this image"></a></p>
</div>
<p>We have normalised (<code class="docutils literal notranslate"><span class="pre">stat=&quot;percent&quot;</span></code>) the bar heights so that
they all sum to 1 (or, equivalently, 100%), which resulted in a <em>probability</em>
histogram.</p>
<p>Now we  see that the probability density
quickly increases, reaches peak at around £15,500–£35,000
and then slowly goes down. It has a <em>long tail</em> on the right
(and hence it is <em>right- or positive-skewed</em>), which means that high
salaries are quite likely.</p>
<p>Thus, it’s quite a non-normal distribution. Most people are rather
poor, they do not earn the average salary. We will get back to that
later.</p>
<p>Also take note of the higher bars, as compared to their neighbours,
at ca. £100,000 and £120,000. Some of us might be tempted
to try to invent a <em>story</em> about why there can be some difference
in the relative probability mass, but we will refrain from it.
Our data sample is quite small and it is likely
that they are just due to the some natural variability.
Of course, there might be some reasons behind it (theoretically),
but we cannot read this by merely looking at a single histogram –
a careful further inspection is necessary, but maybe not today.</p>
<div class="proof proof-type-example" id="id8">

    <div class="proof-title">
        <span class="proof-type">Example 4.3</span>
        
    </div><div class="proof-content">
<p>In the documentation of <strong class="command">seaborn.histplot</strong>
(and <strong class="command">matplotlib.pyplot.hist</strong> which the former extends),
we read that the <code class="docutils literal notranslate"><span class="pre">bins</span></code> argument is passed to
<strong class="command">numpy.histogram_bin_edges</strong>,
which determines the intervals into which our data is split.
Similarly, <strong class="command">numpy.histogram</strong> uses the same function
and additionally returns the corresponding counts (how many observations fall
into each bin) instead of plotting them:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">counts</span><span class="p">,</span> <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">income</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">counts</span>
<span class="n">bins</span>
<span class="c1">## array([131, 238, 238, 147,  95,  55,  29,  23,  10,  12,   5,   7,   4,</span>
<span class="c1">##          3,   2,   0,   0,   0,   0,   1])</span>
<span class="c1">## array([  5750.  ,  15460.95,  25171.9 ,  34882.85,  44593.8 ,  54304.75,</span>
<span class="c1">##         64015.7 ,  73726.65,  83437.6 ,  93148.55, 102859.5 , 112570.45,</span>
<span class="c1">##        122281.4 , 131992.35, 141703.3 , 151414.25, 161125.2 , 170836.15,</span>
<span class="c1">##        180547.1 , 190258.05, 199969.  ])</span>
</pre></div>
</div>
<p>Thus, there are 238 observations both in the
[15460.95, 25171.9) and [25171.9, 34882.85) intervals.
We will discuss the topic of manual data binning in greater detail
in <a class="reference internal" href="420-categorical.html#chap-categorical"><span class="std std-numref">Chapter 12</span></a>.</p>
</div></div><div class="proof proof-type-exercise" id="id9">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.4</span>
        
    </div><div class="proof-content">
<p>There is also the corresponding
<a class="reference external" href="https://github.com/gagolews/teaching_data/blob/master/marek/nhanes_adult_female_weight_2020.txt"><code class="docutils literal notranslate"><span class="pre">nhanes_adult_female_weight_2020</span></code></a>
dataset in our data repository, giving weights (in kgs) of the participants.
Draw a histogram. Does its shape resemble the
<code class="docutils literal notranslate"><span class="pre">income</span></code> or <code class="docutils literal notranslate"><span class="pre">heights</span></code> distribution more?</p>
</div></div></div>
<div class="section" id="marathon-up-to-3-hours-a-left-skewed-distribution">
<h3><span class="section-number">4.3.3. </span><code class="docutils literal notranslate"><span class="pre">marathon</span></code> (up to 3 hours) – A Left-Skewed Distribution<a class="headerlink" href="#marathon-up-to-3-hours-a-left-skewed-distribution" title="Permalink to this headline"></a></h3>
<p>Next, let’s consider the 37th PZU Warsaw Marathon (2015) results.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">marathon</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/gagolews/&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;teaching_data/master/marek/37_pzu_warsaw_marathon_mins.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Here are the top 5 gun times (in minutes):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">marathon</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>  <span class="c1"># preview first 5 (data are already sorted increasingly)</span>
<span class="c1">## array([129.32, 130.75, 130.97, 134.17, 134.68])</span>
</pre></div>
</div>
<p>Plotting the histogram for the participants who finished the 42.2 km run
in less than three hours
reveals (see <a class="reference internal" href="#fig-marathon180-histogram"><span class="std std-numref">Figure 4.4</span></a>)
that the data are highly <em>left</em>-skewed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">marathon</span><span class="p">[</span><span class="n">marathon</span> <span class="o">&lt;</span> <span class="mi">180</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="id10">
<span id="fig-marathon180-histogram"></span><img alt="../_images/marathon180-histogram-7.png" src="../_images/marathon180-histogram-7.png" />
<p class="caption"><span class="caption-number">Figure 4.4 </span><span class="caption-text">Histogram for a subset of the <code class="docutils literal notranslate"><span class="pre">marathon</span></code> dataset</span><a class="headerlink" href="#id10" title="Permalink to this image"></a></p>
</div>
<p>This is of course to be expected – there are only few elite runners
in the game. Yours truly wishes his personal best becomes &lt; 180 minutes someday.
We shall see. Running is fun, so is walking; why not taking a break
for an hour and going outside?</p>
<div class="proof proof-type-exercise" id="id11">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.5</span>
        
    </div><div class="proof-content">
<p>Plot the histogram of the untruncated (complete) version of this
dataset.</p>
</div></div></div>
<div class="section" id="how-many-bins">
<h3><span class="section-number">4.3.4. </span>How Many Bins?<a class="headerlink" href="#how-many-bins" title="Permalink to this headline"></a></h3>
<p>Unless some stronger assumptions about the data distribution
are made, choosing the right number of bins is more art than science:</p>
<ul class="simple">
<li><p>too many will result in a rugged histogram,</p></li>
<li><p>too few might result in our missing of important details.</p></li>
</ul>
<p><a class="reference internal" href="#fig-income-histogram-binnumber"><span class="std std-numref">Figure 4.5</span></a> illustrates this.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">121</span><span class="p">)</span>  <span class="c1"># 1 row, 2 columns, 1st plot</span>
<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">income</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">122</span><span class="p">)</span>  <span class="c1"># 1 row, 2 columns, 2nd plot</span>
<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">income</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="id12">
<span id="fig-income-histogram-binnumber"></span><img alt="../_images/income-histogram-binnumber-9.png" src="../_images/income-histogram-binnumber-9.png" />
<p class="caption"><span class="caption-number">Figure 4.5 </span><span class="caption-text">Too few and too many histogram bins (the <code class="docutils literal notranslate"><span class="pre">income</span></code> dataset</span><a class="headerlink" href="#id12" title="Permalink to this image"></a></p>
</div>
<p>For example, in the histogram with 5 bins, we miss the information
that the ca. £16,000 income is more popular than the ca. £12,000 one.</p>
<p>The other histogram seems too fine-grained already.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>As usual, the “truth” is probably somewhere in-between.
When preparing a histogram for publication (e.g., in a report
or on a webpage), we might be tempted to think “I need to choose one
and only one bin count”. In fact, we do not have to –
even though some people will insist on it, remember that it
is we who are responsible for the data be presented in an
as unambiguous fashion as possible.
Thus, actually, providing 2 or 3 histograms is often a much better idea.</p>
</div>
<p>Further, note that someone might want to trick us by choosing the
number of bins that depict the reality in a good light,
when the truth is quite the opposite. For instance, the histogram on
the left above hides the poorest households inside the first bar –
the first income bracket is very wide. If we cannot request
access to the original data, best thing we can do is to simply ignore
such a data visualisation instance as non-informative
and tell others not to trust it.
A real scientist is a sceptic, first and foremost.</p>
<div class="proof proof-type-exercise" id="id13">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.6</span>
        
    </div><div class="proof-content">
<p>Studying the manual of the <strong class="command">seaborn.histplot</strong> function,
we see that we can provide the function with custom bin breaks.
Plot a histogram which has breaks at
0, 10,000, 20,000, etc.</p>
</div></div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>(*) There are quite a few heuristics
to determine the number of bins automagically,
see <strong class="command">numpy.histogram_bin_edges</strong> for a few formulae.
Check out how different values of the <code class="docutils literal notranslate"><span class="pre">bins</span></code> argument
(e.g., <code class="docutils literal notranslate"><span class="pre">&quot;sturges&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;fd&quot;</span></code>) affect the histogram shapes
on both <code class="docutils literal notranslate"><span class="pre">income</span></code> and <code class="docutils literal notranslate"><span class="pre">heights</span></code> datasets.
Each has its own limitations, but some might be a good
starting point for further fine-tuning.</p>
</div>
</div>
<div class="section" id="manual-binning">
<h3><span class="section-number">4.3.5. </span>Manual Binning (*)<a class="headerlink" href="#manual-binning" title="Permalink to this headline"></a></h3>
<p><strong class="command">numpy.histogram</strong> can be used to apply the binning
of a numeric vector manually and then count the number
of items falling into each bin.
This can for instance be useful for data reporting –
a table of ranges and corresponding counts is more informative
and takes less space. Also, it can increase privacy
(making subjects less identifiable) or hide some uncomfortable facts
(“there are 10 people in our company earning more than £200,000
p.a.” – this can be as much as £10,000,000, but shush).</p>
<p>We will discuss this topic in more detail in <a class="reference internal" href="420-categorical.html#sec-binning"><span class="std std-numref">Section 12.1.5</span></a>.</p>
<div class="proof proof-type-exercise" id="id14">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.7</span>
        
    </div><div class="proof-content">
<p>(*)
Use <strong class="command">numpy.histogram</strong> on the <code class="docutils literal notranslate"><span class="pre">marathon</span></code> data.</p>
</div></div></div>
<div class="section" id="peds-a-bimodal-distribution-already-binned">
<h3><span class="section-number">4.3.6. </span><code class="docutils literal notranslate"><span class="pre">peds</span></code> – A Bimodal Distribution (Already Binned)<a class="headerlink" href="#peds-a-bimodal-distribution-already-binned" title="Permalink to this headline"></a></h3>
<p>Sometimes data we get access to have already been binned by somebody else.
For instance, here are the December 2021 hourly averages
<a class="reference external" href="http://www.pedestrian.melbourne.vic.gov.au/">pedestrian counts</a>
near the Southern Cross Station in Melbourne:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">peds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/gagolews/&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;teaching_data/master/marek/southern_cross_station_peds_2019_dec.txt&quot;</span><span class="p">)</span>
<span class="n">peds</span>
<span class="c1">## array([  31.22580645,   18.38709677,   11.77419355,    8.48387097,</span>
<span class="c1">##           8.58064516,   58.70967742,  332.93548387, 1121.96774194,</span>
<span class="c1">##        2061.87096774, 1253.41935484,  531.64516129,  502.35483871,</span>
<span class="c1">##         899.06451613,  775.        ,  614.87096774,  825.06451613,</span>
<span class="c1">##        1542.74193548, 1870.48387097,  884.38709677,  345.83870968,</span>
<span class="c1">##         203.48387097,  150.4516129 ,  135.67741935,   94.03225806])</span>
</pre></div>
</div>
<p>We cannot thus use <strong class="command">seaborn.histplot</strong> to depict them.
Instead, we can rely on a more low-level function,
<strong class="command">matplotlib.pyplot.bar</strong>,
see <a class="reference internal" href="#fig-peds-histogram"><span class="std std-numref">Figure 4.6</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">24</span><span class="p">),</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">peds</span><span class="p">,</span>
    <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="id15">
<span id="fig-peds-histogram"></span><img alt="../_images/peds-histogram-11.png" src="../_images/peds-histogram-11.png" />
<p class="caption"><span class="caption-number">Figure 4.6 </span><span class="caption-text">Histogram for the <code class="docutils literal notranslate"><span class="pre">peds</span></code> dataset</span><a class="headerlink" href="#id15" title="Permalink to this image"></a></p>
</div>
<p>This is an example of a bimodal (or even trimodal)
distribution: there is a morning peak and
an evening peak (and some analysts
probably would distinguish a lunch-time one too).</p>
</div>
<div class="section" id="matura-a-bell-shaped-distribution-almost">
<h3><span class="section-number">4.3.7. </span><code class="docutils literal notranslate"><span class="pre">matura</span></code> – A Bell-Shaped Distribution (Almost)<a class="headerlink" href="#matura-a-bell-shaped-distribution-almost" title="Permalink to this headline"></a></h3>
<p><a class="reference internal" href="#fig-matura-histogram"><span class="std std-numref">Figure 4.7</span></a> depicts a histogram for another
interesting dataset which has already been pre-summarised.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">matura</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/gagolews/&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;teaching_data/master/marek/matura_2019_polish.txt&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">71</span><span class="p">),</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">matura</span><span class="p">,</span>
    <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="id16">
<span id="fig-matura-histogram"></span><img alt="../_images/matura-histogram-13.png" src="../_images/matura-histogram-13.png" />
<p class="caption"><span class="caption-number">Figure 4.7 </span><span class="caption-text">Histogram for <code class="docutils literal notranslate"><span class="pre">matura</span></code> dataset</span><a class="headerlink" href="#id16" title="Permalink to this image"></a></p>
</div>
<p>This gives the <a class="reference external" href="https://cke.gov.pl/images/_EGZAMIN_MATURALNY_OD_2015/Informacje_o_wynikach/2019/sprawozdanie/Sprawozdanie%202019%20-%20J%C4%99zyk%20polski.pdf">distribution</a>
of the 2019 <a class="reference external" href="https://en.wikipedia.org/wiki/Matura">Matura</a>
exam scores in Poland (in %) – Polish literature at basic level.</p>
<p>It seems that the distribution should be bell-shaped, but someone
tinkered with it. However, knowing that:</p>
<ul class="simple">
<li><p>the examiners are good people – we teachers love our students,</p></li>
<li><p>20 points were required to pass,</p></li>
<li><p>50 points were for an essay – and beauty is in the eye of beholder,</p></li>
</ul>
<p>this actually starts to make sense.
Without graphically depicting this dataset, we wouldn’t know
that such (albeit lucky for some students) <em>anomalies</em> occurred.</p>
</div>
</div>
<div class="section" id="cumulative-counts-and-the-empirical-cumulative-distribution-function">
<span id="sec-ecdf"></span><h2><span class="section-number">4.4. </span>Cumulative Counts and the Empirical Cumulative Distribution Function (*)<a class="headerlink" href="#cumulative-counts-and-the-empirical-cumulative-distribution-function" title="Permalink to this headline"></a></h2>
<p>Let’s get back to the <code class="docutils literal notranslate"><span class="pre">heights</span></code> dataset.
The histogram above told us that, e.g.,
ca. 30% of women are approximately 160±5 cm tall.</p>
<p>However, sometimes we might be more interested in <em>cumulative</em>
counts, see <a class="reference internal" href="#fig-heights-cumulative-histogram"><span class="std std-numref">Figure 4.8</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">heights</span><span class="p">,</span> <span class="n">stat</span><span class="o">=</span><span class="s2">&quot;percent&quot;</span><span class="p">,</span> <span class="n">cumulative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="id17">
<span id="fig-heights-cumulative-histogram"></span><img alt="../_images/heights-cumulative-histogram-15.png" src="../_images/heights-cumulative-histogram-15.png" />
<p class="caption"><span class="caption-number">Figure 4.8 </span><span class="caption-text">Cumulative histogram for the <code class="docutils literal notranslate"><span class="pre">heights</span></code> dataset</span><a class="headerlink" href="#id17" title="Permalink to this image"></a></p>
</div>
<p>This has a different interpretation:
we can read that, e.g, 60% of all women are <em>no more than</em>
ca. 162 cm tall (or that 40% are taller).</p>
<div style="margin-top: 1em"></div><p>Very similar is the plot of the <em>empirical cumulative
distribution function</em> (ECDF), which for a sample
<span class="math notranslate nohighlight">\(\boldsymbol{x}=(x_1,\dots,x_n)\)</span> we denote as <span class="math notranslate nohighlight">\(\hat{F}_n\)</span>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">heights</span><span class="p">)</span>
<span class="n">heights_sorted</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">heights</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">heights_sorted</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">n</span><span class="p">,</span> <span class="n">drawstyle</span><span class="o">=</span><span class="s2">&quot;steps-post&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;$t$&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;$</span><span class="se">\\</span><span class="s2">hat</span><span class="si">{F}</span><span class="s2">_n(t)$, i.e., Prob(height $</span><span class="se">\\</span><span class="s2">leq$ t)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="id18">
<span id="fig-heights-ecdf"></span><img alt="../_images/heights-ecdf-17.png" src="../_images/heights-ecdf-17.png" />
<p class="caption"><span class="caption-number">Figure 4.9 </span><span class="caption-text">Empirical cumulative distribution function for the <code class="docutils literal notranslate"><span class="pre">heights</span></code> dataset</span><a class="headerlink" href="#id18" title="Permalink to this image"></a></p>
</div>
<p>At any given point <span class="math notranslate nohighlight">\(t\in\mathbb{R}\)</span>, <span class="math notranslate nohighlight">\(\hat{F}_n(t)\)</span> is a step function
(we cannot see the steps in <a class="reference internal" href="#fig-heights-ecdf"><span class="std std-numref">Figure 4.9</span></a>,
because the points are too plentiful) that
gives the <em>proportion of observations in our sample that are not greater
than <span class="math notranslate nohighlight">\(t\)</span></em>:</p>
<div class="math notranslate nohighlight">
\[
\hat{F}_n(t) = \frac{| i: x_i\le t |}{n}
\]</div>
<p>(read <span class="math notranslate nohighlight">\(| i: x_i\le t |\)</span> as the number of <span class="math notranslate nohighlight">\(i\)</span>s such that
the corresponding <span class="math notranslate nohighlight">\(x_i\)</span> is greater than or equal to <span class="math notranslate nohighlight">\(t\)</span>)</p>
<p>Given ordered inputs, <span class="math notranslate nohighlight">\(x_{(1)}\le x_{(2)}\le \dots\le x_{(n)}\)</span>,
we have:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\hat{F}_n(t) = \left\{
\begin{array}{ll}
0 &amp; \text{for }t&lt;x_{(1)}, \\
k/n &amp; \text{for }x_{(k)} \le t&lt;x_{(k+1)}, \\
1 &amp; \text{for }t\ge x_{(n)}. \\
\end{array}
\right.
\end{split}\]</div>
<p>Note that drawing the ECDF does not involve binning – we only need
to arrange the observations in an ascending order.
Then, assuming that all observations are unique (there are no ties),
the arithmetic progression <span class="math notranslate nohighlight">\(1/n, 2/n, \dots n\)</span> is plotted
against them.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>(*) Quantiles that we introduce in <a class="reference internal" href="220-aggregate.html#sec-quantiles"><span class="std std-numref">Section 5.1.3</span></a>
can be considered a generalised inverse of the
ECDF.</p>
</div>
</div>
<div class="section" id="log-scale-and-heavy-tailed-distributions">
<h2><span class="section-number">4.5. </span>Log-scale and Heavy-Tailed Distributions<a class="headerlink" href="#log-scale-and-heavy-tailed-distributions" title="Permalink to this headline"></a></h2>
<p>Consider the <a class="reference external" href="https://arxiv.org/abs/0706.1062v2">dataset</a>
on the populations of cities in the 2000 US Census:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cities</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/gagolews/&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;teaching_data/master/other/us_cities_2000.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Let’s restrict ourselves only to the cities
whose population is no less than 10,000.
Even though they constitute ca. 14% of all the US settlements,
about 84% of all the citizens live there.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">large_cities</span> <span class="o">=</span> <span class="n">cities</span><span class="p">[</span><span class="n">cities</span> <span class="o">&gt;=</span> <span class="mi">10000</span><span class="p">]</span>
</pre></div>
</div>
<p>Here are the populations of the 5 largest cities:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">large_cities</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:]</span>  <span class="c1"># preview last 5 – data are sorted increasingly</span>
<span class="c1">## array([1517550., 1953633., 2896047., 3694742., 8008654.])</span>
</pre></div>
</div>
<p>The histogram is depicted in <a class="reference internal" href="#fig-large-cities-histogram"><span class="std std-numref">Figure 4.10</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">large_cities</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="id19">
<span id="fig-large-cities-histogram"></span><img alt="../_images/large-cities-histogram-19.png" src="../_images/large-cities-histogram-19.png" />
<p class="caption"><span class="caption-number">Figure 4.10 </span><span class="caption-text">Histogram for the <code class="docutils literal notranslate"><span class="pre">large_cities</span></code> dataset</span><a class="headerlink" href="#id19" title="Permalink to this image"></a></p>
</div>
<p>is basically unreadable because the distribution is
not just right-skewed; it’s extremely <em>heavy-tailed</em>:
most cities are small, and those that are large – such as New York –
are <em>really</em> unique.
Had we plotted the whole dataset (<code class="docutils literal notranslate"><span class="pre">cities</span></code> instead of <code class="docutils literal notranslate"><span class="pre">large_cities</span></code>),
the results’ intelligibility would be even worse.</p>
<p>This is why we should rather draw such a distribution
on the <a class="reference external" href="https://en.wikipedia.org/wiki/Logarithmic_scale"><em>logarithmic</em> scale</a>,
see  <a class="reference internal" href="#fig-large-cities-histogram-log"><span class="std std-numref">Figure 4.11</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">large_cities</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">log_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-default" id="id20">
<span id="fig-large-cities-histogram-log"></span><img alt="../_images/large-cities-histogram-log-21.png" src="../_images/large-cities-histogram-log-21.png" />
<p class="caption"><span class="caption-number">Figure 4.11 </span><span class="caption-text">Histogram for the <code class="docutils literal notranslate"><span class="pre">large_cities</span></code> dataset (logarithmic scale)</span><a class="headerlink" href="#id20" title="Permalink to this image"></a></p>
</div>
<p>The log-scale on the <em>x</em> axis does not increase
linearly – based on steps of equal sizes 0,
1,000,000, 2,000,000, …, and so forth.
Now the increases are geometrical: 10,000, 100,000, 1,000,000.</p>
<p>This is a right-skewed distribution even on the logarithmic scale.
Many real-world datasets have a similar behaviour,
for instance, the frequencies of occurrences of words in books.
In <a class="reference internal" href="420-categorical.html#sec-binning"><span class="std std-numref">Section 12.1.5</span></a> we will discuss the Pareto distribution
family which
yields similar histograms.</p>
<div class="proof proof-type-exercise" id="id21">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.8</span>
        
    </div><div class="proof-content">
<p>Draw the histogram of <code class="docutils literal notranslate"><span class="pre">income</span></code> on the logarithmic scale.
Does is resemble a bell-shaped distribution?</p>
</div></div><div class="proof proof-type-exercise" id="id22">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.9</span>
        
    </div><div class="proof-content">
<p>(*)
Use <strong class="command">numpy.geomspace</strong> and <strong class="command">numpy.histogram</strong> to apply
logarithmic binning of the <code class="docutils literal notranslate"><span class="pre">large_cities</span></code> dataset manually, i.e.,
to create bins of equal lengths on the log-scale.</p>
</div></div></div>
<div class="section" id="exercises">
<h2><span class="section-number">4.6. </span>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline"></a></h2>
<div class="proof proof-type-exercise" id="id23">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.10</span>
        
    </div><div class="proof-content">
<p>What are some benefits of using a <strong class="program">numpy</strong> vector
over an ordinary Python list? What are the drawbacks?</p>
</div></div><div class="proof proof-type-exercise" id="id24">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.11</span>
        
    </div><div class="proof-content">
<p>What is the difference between <strong class="command">numpy.arange</strong> and
<strong class="command">numpy.linspace</strong>?</p>
</div></div><div class="proof proof-type-exercise" id="id25">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.12</span>
        
    </div><div class="proof-content">
<p>(*) What happens when we convert a logical vector to a numeric one?
(We will discuss that later but you might want to check it yourself now.)</p>
</div></div><div class="proof proof-type-exercise" id="id26">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.13</span>
        
    </div><div class="proof-content">
<p>(*) What happens when we convert a numeric vector to a logical one?</p>
</div></div><div class="proof proof-type-exercise" id="id27">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.14</span>
        
    </div><div class="proof-content">
<p>What is a bell-shaped distribution?</p>
</div></div><div class="proof proof-type-exercise" id="id28">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.15</span>
        
    </div><div class="proof-content">
<p>What is a right-skewed distribution?</p>
</div></div><div class="proof proof-type-exercise" id="id29">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.16</span>
        
    </div><div class="proof-content">
<p>What is a heavy-tailed distribution?</p>
</div></div><div class="proof proof-type-exercise" id="id30">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.17</span>
        
    </div><div class="proof-content">
<p>What is a multi-modal distribution?</p>
</div></div><div class="proof proof-type-exercise" id="id31">

    <div class="proof-title">
        <span class="proof-type">Exercise 4.18</span>
        
    </div><div class="proof-content">
<p>(*) When does logarithmic binning make sense?</p>
</div></div></div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="220-aggregate.html" class="btn btn-neutral float-right" title="5. Aggregating Numeric Data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="130-sequential.html" class="btn btn-neutral float-left" title="3. Sequential and Other Types in Python" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Marek Gagolewski. Licensed under CC BY-NC-ND 4.0.
      <span class="lastupdated">
        Last updated on 2022-04-12T17:31:13+1000.
      </span>
    Built with <a href="https://sphinx-doc.org/">Sphinx</a>
    and a customised <a href="https://github.com/rtfd/sphinx_rtd_theme">rtd</a> theme.
    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>