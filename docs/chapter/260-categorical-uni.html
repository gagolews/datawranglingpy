<!DOCTYPE html>


<html class="writer-html5" lang="en" >
<!-- Copyright (C) 2020-2021, Marek Gagolewski <https://www.gagolewski.com> -->

<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>9. 🚧 Handling Categorical Data &mdash; Minimalist Data Wrangling with Python by Marek Gagolewski</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/proof.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  

  
  

  
    <link rel="canonical" href="https://datawranglingpy.gagolewski.com/chapter/260-categorical-uni.html" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/proof.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="10. Introduction to Matrices in numpy" href="310-matrix.html" />
    <link rel="prev" title="8. 🚧 Continuous Probability Distributions (**)" href="250-distribution-uni.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html"> Minimalist Data Wrangling with Python [DRAFTv0.1.1]
          

          
          </a>

          <div class="version">
          by <a style="color: inherit" href="https://www.gagolewski.com">Marek Gagolewski</a>
          </div>

<!--
          
            
            
              <div class="version">
                by Marek Gagolewski
              </div>
            
          
-->

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search phrase..." />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Start Here</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="000-preface.html">Preface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introducing Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="110-jupyter.html">1. Getting Started with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="120-scalar.html">2. Scalar Types in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="130-sequential.html">3. Sequential and Other Types in Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Unidimensional Data</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="210-vector.html">4. Introduction to Vectors in <strong class="program">numpy</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="220-histogram.html">5. Inspecting the Distribution of Numeric Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="230-aggregate.html">6. Descriptive Statistics for Numeric Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="240-transform-uni.html">7. Transforming and Filtering Numeric Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="250-distribution-uni.html">8. 🚧 Continuous Probability Distributions (**)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">9. 🚧 Handling Categorical Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#representing-categorical-data">9.1. Representing Categorical Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#encoding-and-decoding-factors">9.1.1. Encoding and Decoding Factors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#binning-numeric-data">9.1.2. Binning Numeric Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-pseudorandom-labels">9.1.3. Generating Pseudorandom Labels</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#frequency-distributions">9.2. Frequency Distributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#counting">9.2.1. Counting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#visualising">9.2.2. Visualising</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bar-plots">9.2.2.1. Bar Plots</a></li>
<li class="toctree-l4"><a class="reference internal" href="#don-t-let-them-trick-you">9.2.2.2. Don’t Let Them Trick You</a></li>
<li class="toctree-l4"><a class="reference internal" href="#error-bars">9.2.2.3. Error Bars (**)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pareto-charts">9.2.2.4. Pareto Charts (*)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#aggregating">9.2.3. Aggregating</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#categorical-data">9.2.3.1. Categorical Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#binned-numeric-data">9.2.3.2. Binned Numeric Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ordinal-data">9.2.3.3. Ordinal Data (*)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#binary-data-and-logical-vectors">9.3. Binary Data and Logical Vectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="#questions">9.4. Questions</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Multidimensional Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="310-matrix.html">10. Introduction to Matrices in <strong class="program">numpy</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="320-transform-multi.html">11. 🚧 Transforming, Aggregating, and Filtering Multidimensional Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="330-visualise-multi.html">12. 🚧 Visualising Multidimensional Data and Measuring Correlation</a></li>
<li class="toctree-l1"><a class="reference internal" href="340-categorical-multi.html">13. 🚧 Multivariate Categorical and Relational Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Heterogeneous Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="410-dataframe.html">14. 🚧 Introduction to Data Frames in <strong class="program">pandas</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="420-transform-hetero.html">15. 🚧 Basic Operations on Data Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="430-reshape.html">16. 🚧 Reshaping and Fusing Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="440-groupby.html">17. 🚧 Observation Grouping</a></li>
<li class="toctree-l1"><a class="reference internal" href="450-sql.html">18. Database Access</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Text and Other Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="510-text.html">19. Working with Text Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="520-regex.html">20. Regular Expressions (*)</a></li>
<li class="toctree-l1"><a class="reference internal" href="530-missingness.html">21. Outliers, Missing, Censored, and Incorrect Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="540-time.html">22. Time Series</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="998-changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="999-bibliography.html">Bibliography</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://datawranglingpy.gagolewski.com/datawranglingpy.pdf">This Book in PDF</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/datawranglingpy/blob/master/CODE_OF_CONDUCT.md">Report Bugs or Typos</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/teaching_data">Datasets</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.gagolewski.com">Author</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Minimalist Data Wrangling with Python [DRAFTv0.1.1]</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">9. </span>🚧 Handling Categorical Data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="310-matrix.html" class="btn btn-neutral float-right" title="10. Introduction to Matrices in numpy" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="250-distribution-uni.html" class="btn btn-neutral float-left" title="8. 🚧 Continuous Probability Distributions (**)" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="tex2jax_ignore mathjax_ignore section" id="handling-categorical-data">
<span id="chap-categorical-uni"></span><h1><span class="section-number">9. </span>🚧 Handling Categorical Data<a class="headerlink" href="#handling-categorical-data" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><em>This is an early draft of</em> Minimalist Data Wrangling with Python <em>by
<a class="reference external" href="https://www.gagolewski.com">Marek Gagolewski</a>. It is distributed
in the hope that it will be useful. Any
<a class="reference external" href="https://github.com/gagolews/datawranglingpy/blob/master/CODE_OF_CONDUCT.md">bug/typos reports/fixes</a>
are appreciated. Although available online, this is a whole course,
and should be read from the beginning to the end. In particular,
refer to the <a class="reference internal" href="000-preface.html#chap-preface"><span class="std std-ref">Preface</span></a> for general introductory remarks.</em></p>
</div></blockquote>
<p>So far we have been dealing with <em>quantitative</em> (numeric) data –
real numbers on which we can apply various mathematical operations,
such as computing the arithmetic mean and standard deviation or binning.
Of course, not every transformation thereof must always make sense in every
context (e.g., multiplying temperatures – what does it mean
when we say that it’s twice as hot today as compared to yesterday?),
but still, the possibilities are plenty.</p>
<p><em>Qualitative</em> data (also known as categorical data, factors, enumerated types),
on the other hand, take a small number of unique values
and support a very limited set of admissible operations.
Usually, we can only determine
where two entities are equal to each other or not (think: eye colour,
blood type, or a flag whether a patient is ill).</p>
<p>In datasets involving many features, which we shall cover
in the part on data frames, categorical variables
are often used for observation grouping (e.g., so that
we can compute the best and average time for marathoners in
each age category or draw boxplots for finish times of
men and women separately). Also, they may serve as
target variables in statistical classification tasks
(e.g., so that we can determine if an email is “spam” or “not spam”).</p>
<p>Also, sometimes we might additionally be able to rank the
observations (Australian school grades are linearly ordered
like F (fail) &lt; P (pass) &lt; C (credit) &lt; D (distinction) &lt; HD (high distinction),
some questionnaires use
<a class="reference external" href="https://en.wikipedia.org/wiki/Likert_scale">Likert</a>-type scales such
as “strongly disagree” &lt; “disagree” &lt; “neutral” &lt; “agree” &lt; “strongly agree”, etc.).</p>
<div class="section" id="representing-categorical-data">
<h2><span class="section-number">9.1. </span>Representing Categorical Data<a class="headerlink" href="#representing-categorical-data" title="Permalink to this headline">¶</a></h2>
<p>Two common ways to represent a categorical variable
with <em>k</em> distinct levels is by storing it as:</p>
<ul class="simple">
<li><p>a vector of strings,</p></li>
<li><p>a vector of integers between 0 (inclusive) and k (exclusive).</p></li>
</ul>
<p>These two are easily interchangeable.</p>
<p>For instance, consider the data on where the top 16 marathoners
come from:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">countries</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/gagolews/&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;teaching_data/master/marek/37_pzu_warsaw_marathon_country.txt&quot;</span><span class="p">,</span>
    <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;str&quot;</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">countries</span><span class="p">[:</span><span class="mi">16</span><span class="p">]</span>
<span class="n">x</span>
<span class="c1">## array([&#39;KE&#39;, &#39;KE&#39;, &#39;KE&#39;, &#39;ET&#39;, &#39;KE&#39;, &#39;KE&#39;, &#39;ET&#39;, &#39;MA&#39;, &#39;PL&#39;, &#39;PL&#39;, &#39;IL&#39;,</span>
<span class="c1">##        &#39;PL&#39;, &#39;KE&#39;, &#39;KE&#39;, &#39;PL&#39;, &#39;PL&#39;], dtype=&#39;&lt;U2&#39;)</span>
</pre></div>
</div>
<p>These are two-letter <a class="reference external" href="https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes">ISO 3166</a> country codes,
encoded of course as strings (note the <code class="docutils literal notranslate"><span class="pre">dtype=&quot;str&quot;</span></code> argument).</p>
<p>Calling <strong class="command">numpy.unique</strong> allows us to determine
the set of distinct categories:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## array([&#39;ET&#39;, &#39;IL&#39;, &#39;KE&#39;, &#39;MA&#39;, &#39;PL&#39;], dtype=&#39;&lt;U2&#39;)</span>
</pre></div>
</div>
<p>They have been sorted automatically.</p>
<div class="section" id="encoding-and-decoding-factors">
<h3><span class="section-number">9.1.1. </span>Encoding and Decoding Factors<a class="headerlink" href="#encoding-and-decoding-factors" title="Permalink to this headline">¶</a></h3>
<p>In order to <em>encode</em> <code class="docutils literal notranslate"><span class="pre">x</span></code> through a set of consecutive nonnegative
integers, we pass the <code class="docutils literal notranslate"><span class="pre">return_inverse=True</span></code> argument
to <strong class="command">numpy.unique</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">categories</span><span class="p">,</span> <span class="n">codes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">return_inverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">categories</span><span class="p">,</span> <span class="n">codes</span>
<span class="c1">## (array([&#39;ET&#39;, &#39;IL&#39;, &#39;KE&#39;, &#39;MA&#39;, &#39;PL&#39;], dtype=&#39;&lt;U2&#39;), array([2, 2, 2, 0, 2, 2, 0, 3, 4, 4, 1, 4, 2, 2, 4, 4]))</span>
</pre></div>
</div>
<p>Note that the code sequence 2, 2, 2, 0, …
corresponds to the 3rd, 3rd, 3rd, 1st, … level in <code class="docutils literal notranslate"><span class="pre">categories</span></code>,
i.e., Kenya, Kenya, Kenya, Ethiopia, ….</p>
<p>The values between 0 and <em>k-1=4</em> can be used to index a given an array
of length <em>k=5</em>. Hence, in order to <em>decode</em> our factor, we can write:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">categories</span><span class="p">[</span><span class="n">codes</span><span class="p">]</span>
<span class="c1">## array([&#39;KE&#39;, &#39;KE&#39;, &#39;KE&#39;, &#39;ET&#39;, &#39;KE&#39;, &#39;KE&#39;, &#39;ET&#39;, &#39;MA&#39;, &#39;PL&#39;, &#39;PL&#39;, &#39;IL&#39;,</span>
<span class="c1">##        &#39;PL&#39;, &#39;KE&#39;, &#39;KE&#39;, &#39;PL&#39;, &#39;PL&#39;], dtype=&#39;&lt;U2&#39;)</span>
</pre></div>
</div>
<p>We can use any other set of labels now:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot;Ethiopia&quot;</span><span class="p">,</span> <span class="s2">&quot;Israel&quot;</span><span class="p">,</span> <span class="s2">&quot;Kenya&quot;</span><span class="p">,</span> <span class="s2">&quot;Morocco&quot;</span><span class="p">,</span> <span class="s2">&quot;Poland&quot;</span><span class="p">])[</span><span class="n">codes</span><span class="p">]</span>
<span class="c1">## array([&#39;Kenya&#39;, &#39;Kenya&#39;, &#39;Kenya&#39;, &#39;Ethiopia&#39;, &#39;Kenya&#39;, &#39;Kenya&#39;,</span>
<span class="c1">##        &#39;Ethiopia&#39;, &#39;Morocco&#39;, &#39;Poland&#39;, &#39;Poland&#39;, &#39;Israel&#39;, &#39;Poland&#39;,</span>
<span class="c1">##        &#39;Kenya&#39;, &#39;Kenya&#39;, &#39;Poland&#39;, &#39;Poland&#39;], dtype=&#39;&lt;U8&#39;)</span>
</pre></div>
</div>
<p>This is an instance of the <em>recoding</em> of a categorical variable.</p>
<blockquote>
<div><p><strong>Important.</strong> Despite the fact that we can
<em>represent</em> a categorical variables using a set of integers,
it does not make them become instances of a numerical type.
Arithmetic operations do not make sense on them.</p>
</div></blockquote>
<blockquote>
<div><p>(**) <strong>Exercise.</strong> Determine the set of unique values
in <code class="docutils literal notranslate"><span class="pre">x</span></code> in the order of appearance (and not sorted lexicographically).
Then, encode <code class="docutils literal notranslate"><span class="pre">x</span></code> using this level set.
Hint: check out the <code class="docutils literal notranslate"><span class="pre">return_index</span></code> argument to <strong class="command">numpy.unique</strong>
and the <strong class="command">numpy.searchsorted</strong> function.</p>
</div></blockquote>
</div>
<div class="section" id="binning-numeric-data">
<h3><span class="section-number">9.1.2. </span>Binning Numeric Data<a class="headerlink" href="#binning-numeric-data" title="Permalink to this headline">¶</a></h3>
<p>Numerical data can be converted to categorical via
binning (quantisation). This results in information (precision) loss,
however, it also opens some new possibilities. In fact, this is what we needed
to do in order to draw a histogram.</p>
<p>Also, reporting counts instead of raw data enables us to include them
in printed reports (in form of a table).</p>
<blockquote>
<div><p><strong>Note.</strong>
As strong proponents of openness and transparency,
we always encourage all entities (government, research,
non-for-profits, NGOs, corporations, etc.)
to share (e.g., under the Creative Commons CC-BY-SA-4.0 license)
unabridged versions of their datasets to enable public scrutiny
and getting the most of the possibilities they can bring for
the public good.</p>
</div></blockquote>
<blockquote>
<div><p><strong>Note.</strong>
Of course, sometimes the sharing of unprocessed information
can violate the privacy of the subjects. In such a case,
it might be a good idea to distribute them
in binned or otherwise aggregated form.</p>
</div></blockquote>
<p>Consider the 16 best marathon finish times (in minutes):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">marathon</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/gagolews/&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;teaching_data/master/marek/37_pzu_warsaw_marathon_mins.txt&quot;</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">marathon</span><span class="p">[:</span><span class="mi">16</span><span class="p">]</span>
<span class="n">t</span>
<span class="c1">## array([129.32, 130.75, 130.97, 134.17, 134.68, 135.97, 139.88, 143.2 ,</span>
<span class="c1">##        145.22, 145.92, 146.83, 147.8 , 149.65, 149.88, 152.65, 152.88])</span>
</pre></div>
</div>
<p><strong class="command">numpy.searchsorted</strong> can be used to determine
the interval where each value in <code class="docutils literal notranslate"><span class="pre">t</span></code> falls.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">130</span><span class="p">,</span> <span class="mi">140</span><span class="p">,</span> <span class="mi">150</span><span class="p">]</span>
<span class="n">codes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">searchsorted</span><span class="p">(</span><span class="n">bins</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
<span class="n">codes</span>
<span class="c1">## array([0, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 3, 3])</span>
</pre></div>
</div>
<p>By default, the intervals are of the form <em>(a, b]</em> (not including
<em>a</em>, including <em>b</em>).
Code 0 corresponds to values less than the first bin bound,
whereas code 3 – greater than or equal to the last bound:</p>
<blockquote>
<div><p>(*) <strong>Exercise.</strong> Check out the <strong class="command">numpy.histogram_bin_edges</strong>
function which tries to determine some informative
interval bounds automatically based on a range of
simple heuristics.
Also, note that <strong class="command">numpy.linspace</strong> and <strong class="command">numpy.geomspace</strong>
can be useful for generating equidistant bounds
on linear and logarithmic scale, respectively.</p>
</div></blockquote>
<p>(*) We can create a set of the corresponding categories,
for example, as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bins2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">]</span>
<span class="n">categories</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
    <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">bins2</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">bins2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2">]&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">bins2</span><span class="p">))]</span>
<span class="p">)</span>
<span class="n">categories</span>
<span class="c1">## array([&#39;(-inf, 130.0]&#39;, &#39;(130.0, 140.0]&#39;, &#39;(140.0, 150.0]&#39;,</span>
<span class="c1">##        &#39;(150.0, inf]&#39;], dtype=&#39;&lt;U14&#39;)</span>
</pre></div>
</div>
<p>This uses the so-called <em>list comprehension</em> which is a convenient
substitute for a <strong class="command">for</strong> loop and the <strong class="command">list.append</strong> method.</p>
<p>And now recoding:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">categories</span><span class="p">[</span><span class="n">codes</span><span class="p">]</span>
<span class="c1">## array([&#39;(-inf, 130.0]&#39;, &#39;(130.0, 140.0]&#39;, &#39;(130.0, 140.0]&#39;,</span>
<span class="c1">##        &#39;(130.0, 140.0]&#39;, &#39;(130.0, 140.0]&#39;, &#39;(130.0, 140.0]&#39;,</span>
<span class="c1">##        &#39;(130.0, 140.0]&#39;, &#39;(140.0, 150.0]&#39;, &#39;(140.0, 150.0]&#39;,</span>
<span class="c1">##        &#39;(140.0, 150.0]&#39;, &#39;(140.0, 150.0]&#39;, &#39;(140.0, 150.0]&#39;,</span>
<span class="c1">##        &#39;(140.0, 150.0]&#39;, &#39;(140.0, 150.0]&#39;, &#39;(150.0, inf]&#39;, &#39;(150.0, inf]&#39;],</span>
<span class="c1">##       dtype=&#39;&lt;U14&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="generating-pseudorandom-labels">
<h3><span class="section-number">9.1.3. </span>Generating Pseudorandom Labels<a class="headerlink" href="#generating-pseudorandom-labels" title="Permalink to this headline">¶</a></h3>
<p><strong class="command">numpy.random.choice</strong> allows us to create a pseudorandom sample
of with categories picked with any probabilities:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span>
    <span class="p">[</span><span class="s2">&quot;spam&quot;</span><span class="p">,</span> <span class="s2">&quot;bacon&quot;</span><span class="p">,</span> <span class="s2">&quot;eggs&quot;</span><span class="p">,</span> <span class="s2">&quot;tempeh&quot;</span><span class="p">],</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">],</span>
    <span class="n">replace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">16</span>
<span class="p">)</span>
<span class="c1">## array([&#39;spam&#39;, &#39;spam&#39;, &#39;spam&#39;, &#39;spam&#39;, &#39;bacon&#39;, &#39;spam&#39;, &#39;tempeh&#39;, &#39;spam&#39;,</span>
<span class="c1">##        &#39;spam&#39;, &#39;spam&#39;, &#39;spam&#39;, &#39;bacon&#39;, &#39;spam&#39;, &#39;spam&#39;, &#39;spam&#39;, &#39;bacon&#39;],</span>
<span class="c1">##       dtype=&#39;&lt;U6&#39;)</span>
</pre></div>
</div>
<p>Hence, if we generate a sufficiently large sample,
we will expect <code class="docutils literal notranslate"><span class="pre">&quot;spam&quot;</span></code> to occur ca. 70% times, and <code class="docutils literal notranslate"><span class="pre">&quot;tempeh&quot;</span></code>
to be drawn in 5% of the cases, etc.</p>
</div>
</div>
<div class="section" id="frequency-distributions">
<h2><span class="section-number">9.2. </span>Frequency Distributions<a class="headerlink" href="#frequency-distributions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="counting">
<h3><span class="section-number">9.2.1. </span>Counting<a class="headerlink" href="#counting" title="Permalink to this headline">¶</a></h3>
<p>For arbitrary categorical data, we can call:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">countries</span><span class="p">[:</span><span class="mi">16</span><span class="p">]</span>
<span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">return_counts</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">## (array([&#39;ET&#39;, &#39;IL&#39;, &#39;KE&#39;, &#39;MA&#39;, &#39;PL&#39;], dtype=&#39;&lt;U2&#39;), array([2, 1, 7, 1, 5]))</span>
</pre></div>
</div>
<p>to get both the set of unique categories and
the corresponding number of occurrences.
For instance, there were 7 runners from Kenya amongst the top 16.</p>
<p>If we already have an array of integer codes between 0 and k-1,
<strong class="command">numpy.bincount</strong> will return the number of
times each code appears therein.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">categories</span><span class="p">,</span> <span class="n">codes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">return_inverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">bincount</span><span class="p">(</span><span class="n">codes</span><span class="p">)</span>
<span class="n">counts</span>
<span class="c1">## array([2, 1, 7, 1, 5])</span>
</pre></div>
</div>
<p>We can output a nice <em>frequency table</em> as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">category</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">categories</span><span class="p">,</span> <span class="n">counts</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">category</span><span class="si">:</span><span class="s2">4</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">count</span><span class="si">:</span><span class="s2">5</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1">## ET  :     2</span>
<span class="c1">## IL  :     1</span>
<span class="c1">## KE  :     7</span>
<span class="c1">## MA  :     1</span>
<span class="c1">## PL  :     5</span>
</pre></div>
</div>
<p>Note that a vector of counts can easily be turned into
a vector of proportions (fractions):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">counts</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>
<span class="c1">## array([0.125 , 0.0625, 0.4375, 0.0625, 0.3125])</span>
</pre></div>
</div>
<p>Hence, almost 31.25% of the top players were from Poland.</p>
<p>Recall that in the part on histograms,
we have mentioned the <strong class="command">numpy.histogram</strong> function which applies the
binning of a numeric vector and then counts the number
of occurrences.
This is merely a helper function: the same result can be obtained
by means of the more basic
<strong class="command">numpy.searchsorted</strong>, <strong class="command">numpy.bincount</strong>,
and <strong class="command">numpy.histogram_bin_edges</strong>.</p>
<blockquote>
<div><p><strong>Exercise.</strong> Apply <strong class="command">numpy.histogram</strong>
on the <code class="docutils literal notranslate"><span class="pre">37_pzu_warsaw_marathon_mins</span></code> data.</p>
</div></blockquote>
</div>
<div class="section" id="visualising">
<h3><span class="section-number">9.2.2. </span>Visualising<a class="headerlink" href="#visualising" title="Permalink to this headline">¶</a></h3>
<p>Methods for visualising categorical data are by no means
fascinating (unless we use them as grouping variables in more complex
datasets, but this is a topic that we cover later).</p>
<p>First of all, we are definitely not going to be discussing the infamous
<a class="reference external" href="https://en.wikipedia.org/wiki/Pie_chart">pie charts</a>, because
their use in data analysis has been widely criticised for a long time
(it’s difficult to judge the ratios of areas).</p>
<div class="section" id="bar-plots">
<h4><span class="section-number">9.2.2.1. </span>Bar Plots<a class="headerlink" href="#bar-plots" title="Permalink to this headline">¶</a></h4>
<p>Bar plots will do the trick most of the time
(<strong class="command">matplotlib.pyplot.bar</strong>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s2">&quot;seaborn&quot;</span><span class="p">)</span>
<span class="n">ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">categories</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">counts</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">categories</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="c1">## &lt;BarContainer object of 5 artists&gt;</span>
<span class="c1">## ([&lt;matplotlib.axis.XTick object at 0x7f6029839250&gt;, &lt;matplotlib.axis.XTick object at 0x7f6029839220&gt;, &lt;matplotlib.axis.XTick object at 0x7f602981fdc0&gt;, &lt;matplotlib.axis.XTick object at 0x7f602852b6a0&gt;, &lt;matplotlib.axis.XTick object at 0x7f602852bbb0&gt;], [Text(0, 0, &#39;ET&#39;), Text(1, 0, &#39;IL&#39;), Text(2, 0, &#39;KE&#39;), Text(3, 0, &#39;MA&#39;), Text(4, 0, &#39;PL&#39;)])</span>
</pre></div>
</div>
<div class="figure align-default" id="id1">
<span id="fig-260-categorical-uni-15"></span><img alt="../_images/260-categorical-uni-15-1.png" src="../_images/260-categorical-uni-15-1.png" />
<p class="caption"><span class="caption-number">Figure 9.1 </span><span class="caption-text">plot of chunk 260-categorical-uni-15</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<blockquote>
<div><p><strong>Exercise.</strong> Assign a different colour to each bar.</p>
</div></blockquote>
<blockquote>
<div><p><strong>Exercise.</strong> Draw a bar plot which features proportions instead
of counts, so that the total bar height is 100% (or 1).</p>
</div></blockquote>
<blockquote>
<div><p><strong>Exercise.</strong> Print the frequency table
and draw a bar plot for all the marathoners’ countries (not just the top 16).</p>
</div></blockquote>
</div>
<div class="section" id="don-t-let-them-trick-you">
<h4><span class="section-number">9.2.2.2. </span>Don’t Let Them Trick You<a class="headerlink" href="#don-t-let-them-trick-you" title="Permalink to this headline">¶</a></h4>
<p>Even such a simple plot can be manipulated.
For example, presidential elections were held in Poland in 2020.
In the second round, Andrzej Duda had won against
Rafał Trzaskowski. Here are the official results that might be presented
by one of the infamous Polish TV conglomerate:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="p">[</span><span class="mf">51.03</span><span class="p">,</span> <span class="mf">48.97</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Duda&quot;</span><span class="p">,</span> <span class="s2">&quot;Trzaskowski&quot;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mf">48.9</span><span class="p">,</span> <span class="mf">51.1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="c1">## &lt;BarContainer object of 2 artists&gt;</span>
<span class="c1">## ([&lt;matplotlib.axis.XTick object at 0x7f60284bc220&gt;, &lt;matplotlib.axis.XTick object at 0x7f60284bc160&gt;], [Text(1, 0, &#39;Duda&#39;), Text(2, 0, &#39;Trzaskowski&#39;)])</span>
<span class="c1">## (48.9, 51.1)</span>
</pre></div>
</div>
<div class="figure align-default" id="id2">
<span id="fig-260-categorical-uni-16"></span><img alt="../_images/260-categorical-uni-16-3.png" src="../_images/260-categorical-uni-16-3.png" />
<p class="caption"><span class="caption-number">Figure 9.2 </span><span class="caption-text">plot of chunk 260-categorical-uni-16</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>Such a great victory! Wait… it was a close vote after all!</p>
<p>Another media source could have reported it like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="p">[</span><span class="mf">51.03</span><span class="p">,</span> <span class="mf">48.97</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Duda&quot;</span><span class="p">,</span> <span class="s2">&quot;Trzaskowski&quot;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">250</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="c1">## &lt;BarContainer object of 2 artists&gt;</span>
<span class="c1">## ([&lt;matplotlib.axis.XTick object at 0x7f601bae8e80&gt;, &lt;matplotlib.axis.XTick object at 0x7f601bae8af0&gt;], [Text(1, 0, &#39;Duda&#39;), Text(2, 0, &#39;Trzaskowski&#39;)])</span>
<span class="c1">## (0.0, 250.0)</span>
<span class="c1">## ([&lt;matplotlib.axis.YTick object at 0x7f601ba868b0&gt;, &lt;matplotlib.axis.YTick object at 0x7f601ba864f0&gt;], [Text(0, 0, &#39;&#39;), Text(0, 0, &#39;&#39;)])</span>
</pre></div>
</div>
<div class="figure align-default" id="id3">
<span id="fig-260-categorical-uni-17"></span><img alt="../_images/260-categorical-uni-17-5.png" src="../_images/260-categorical-uni-17-5.png" />
<p class="caption"><span class="caption-number">Figure 9.3 </span><span class="caption-text">plot of chunk 260-categorical-uni-17</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>The moral of the story is: always read the axis tick marks.</p>
</div>
<div class="section" id="error-bars">
<h4><span class="section-number">9.2.2.3. </span>Error Bars (**)<a class="headerlink" href="#error-bars" title="Permalink to this headline">¶</a></h4>
<p>Occasionally, the data we have at hand are based on small surveys
and are supposed to serve as estimates of what might be happening in
a larger population.</p>
<p>For instance, one of the pre-election polls
indicated that 516 out of 1017 people would vote for Duda.
This is ca. 50.74%, but this number is subject to sampling error.</p>
<p>If we asked a statistician for the error estimates, they could provide
us with, for example, 95% confidence intervals for the true proportions
(<strong class="command">scipy.stats.binomtest</strong> has a procedure implementing this).
For both candidates, they are within ca. ±3.1% from the
sample estimates. It would be nice to inform the reader of the
figure that we are uncertain about the truth. <em>Error bars</em>
can serve this purpose.</p>
<p>To recall, the winner scored 51.03% on the election day,
where 20,458,911 valid votes were cast in total.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">516</span><span class="p">,</span> <span class="mi">1017</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="p">[</span><span class="n">c</span><span class="o">/</span><span class="n">n</span><span class="p">,</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">c</span><span class="p">)</span><span class="o">/</span><span class="n">n</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">errorbar</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="n">c</span><span class="o">/</span><span class="n">n</span><span class="p">,</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">c</span><span class="p">)</span><span class="o">/</span><span class="n">n</span><span class="p">],</span> <span class="n">yerr</span><span class="o">=</span><span class="mf">0.031</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Duda&quot;</span><span class="p">,</span> <span class="s2">&quot;Trzaskowski&quot;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="c1">## &lt;BarContainer object of 2 artists&gt;</span>
<span class="c1">## &lt;ErrorbarContainer object of 3 artists&gt;</span>
<span class="c1">## ([&lt;matplotlib.axis.XTick object at 0x7f601ba86c10&gt;, &lt;matplotlib.axis.XTick object at 0x7f601ba86a90&gt;], [Text(1, 0, &#39;Duda&#39;), Text(2, 0, &#39;Trzaskowski&#39;)])</span>
</pre></div>
</div>
<div class="figure align-default" id="id4">
<span id="fig-260-categorical-uni-18"></span><img alt="../_images/260-categorical-uni-18-7.png" src="../_images/260-categorical-uni-18-7.png" />
<p class="caption"><span class="caption-number">Figure 9.4 </span><span class="caption-text">plot of chunk 260-categorical-uni-18</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p>Note that in order to improve the estimate, we would of course have to
poll more people, e.g., a sample of size 10,000 would give
errors of ±0.1% (assuming people don’t change their minds
in the meantime).</p>
</div>
<div class="section" id="pareto-charts">
<h4><span class="section-number">9.2.2.4. </span>Pareto Charts (*)<a class="headerlink" href="#pareto-charts" title="Permalink to this headline">¶</a></h4>
<p>As a general (empirical) rule, it is usually the case
that most instances of something’s happening (usually 70–90%)
are due to only few causes (10–30%). This is known as the <em>Pareto rule</em>
(with 80–20% being an often cited rule of thumb).</p>
<p>For instance, in the part where we modelled
the US cities’ population dataset using the Pareto distribution
(the very same Pareto, but a different, yet related object),
where we discovered that only ca. 14% of the settlements (those
with 10,000 or more inhabitants) is home to as much as
84% of the population.</p>
<p>Here is a <a class="reference external" href="https://www.cec.health.nsw.gov.au/CEC-Academy/quality-improvement-tools/pareto-charts">dataset</a> fabricated by the
Clinical Excellence Commission in New South Wales, Australia,
listing the most frequent causes for medication errors:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">categories</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
    <span class="s2">&quot;Unauthorised drug&quot;</span><span class="p">,</span> <span class="s2">&quot;Wrong IV rate&quot;</span><span class="p">,</span> <span class="s2">&quot;Wrong patient&quot;</span><span class="p">,</span> <span class="s2">&quot;Dose missed&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Under dose&quot;</span><span class="p">,</span> <span class="s2">&quot;Wrong calculation&quot;</span><span class="p">,</span><span class="s2">&quot;Wrong route&quot;</span><span class="p">,</span> <span class="s2">&quot;Wrong drug&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Wrong time&quot;</span><span class="p">,</span> <span class="s2">&quot;Technique error&quot;</span><span class="p">,</span> <span class="s2">&quot;Duplicated drugs&quot;</span><span class="p">,</span> <span class="s2">&quot;Over dose&quot;</span>
<span class="p">])</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">92</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">76</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">59</span><span class="p">])</span>
<span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>  <span class="c1"># total number of medication errors</span>
<span class="c1">## 430</span>
</pre></div>
</div>
<p>Let’s order the dataset with respect to the counts, decreasingly:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">o</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">counts</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># ordering permutation (reversed = decreasing)</span>
<span class="n">categories</span> <span class="o">=</span> <span class="n">categories</span><span class="p">[</span><span class="n">o</span><span class="p">]</span>  <span class="c1"># order categories based on counts</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">counts</span><span class="p">[</span><span class="n">o</span><span class="p">]</span>  <span class="c1"># equivalent to np.sort(counts)[::-1]</span>
<span class="k">for</span> <span class="n">category</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">categories</span><span class="p">,</span> <span class="n">counts</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">category</span><span class="si">:</span><span class="s2">20</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">count</span><span class="si">:</span><span class="s2">2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1">## Dose missed         : 92</span>
<span class="c1">## Wrong time          : 83</span>
<span class="c1">## Wrong drug          : 76</span>
<span class="c1">## Over dose           : 59</span>
<span class="c1">## Wrong patient       : 53</span>
<span class="c1">## Wrong route         : 27</span>
<span class="c1">## Wrong calculation   : 16</span>
<span class="c1">## Duplicated drugs    :  9</span>
<span class="c1">## Under dose          :  7</span>
<span class="c1">## Wrong IV rate       :  4</span>
<span class="c1">## Technique error     :  3</span>
<span class="c1">## Unauthorised drug   :  1</span>
</pre></div>
</div>
<p>Pareto charts are tools which may aid
in visualising the Pareto-ruled datasets.
They are based on bar plots, but feature some extras:</p>
<ul class="simple">
<li><p>bars are listed in a decreasing order,</p></li>
<li><p>the cumulative percentage curve is added.</p></li>
</ul>
<p>The plotting of the Pareto chart is a little tricky,
because it involves using two different Y axes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">categories</span><span class="p">))</span>  <span class="c1"># 0, 1, 2, ...</span>
<span class="n">p</span> <span class="o">=</span> <span class="mf">100.0</span><span class="o">*</span><span class="n">counts</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>  <span class="c1"># percentages</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">categories</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">p</span><span class="p">)</span>

<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>  <span class="c1"># this creates a new coordinate system with a shared X axis</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="s2">&quot;ro-&quot;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;cumulative %&quot;</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="c1">## &lt;BarContainer object of 12 artists&gt;</span>
</pre></div>
</div>
<div class="figure align-default" id="id5">
<span id="fig-260-categorical-uni-21"></span><img alt="../_images/260-categorical-uni-21-9.png" src="../_images/260-categorical-uni-21-9.png" />
<p class="caption"><span class="caption-number">Figure 9.5 </span><span class="caption-text">plot of chunk 260-categorical-uni-21</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p>As usual, fine-tuning of the figure and studying the manual
of the <strong class="program">matplotlib</strong> package is left as an exercise.</p>
<p>From the figure, we can read that 5 causes (less than 40%) correspond
to ca. 85% of the medication errors:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">category</span><span class="p">,</span> <span class="n">cumprob</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">categories</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="mi">1</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">category</span><span class="si">:</span><span class="s2">20</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">cumprob</span><span class="si">:</span><span class="s2">5</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
<span class="c1">## Dose missed         :  21.4%</span>
<span class="c1">## Wrong time          :  40.7%</span>
<span class="c1">## Wrong drug          :  58.4%</span>
<span class="c1">## Over dose           :  72.1%</span>
<span class="c1">## Wrong patient       :  84.4%</span>
<span class="c1">## Wrong route         :  90.7%</span>
<span class="c1">## Wrong calculation   :  94.4%</span>
<span class="c1">## Duplicated drugs    :  96.5%</span>
<span class="c1">## Under dose          :  98.1%</span>
<span class="c1">## Wrong IV rate       :  99.1%</span>
<span class="c1">## Technique error     :  99.8%</span>
<span class="c1">## Unauthorised drug   : 100.0%</span>
</pre></div>
</div>
<p>Note that there is an explicit assumption here that
a single error is only due to a single cause.
Also, we presume that each medication error has a similar degree of
severity.</p>
<p>Policy makers and quality controllers often rely on such simplifications,
therefore they most probably are going to be addressing only the
top causes. If we have ever wondered why some processes (mal)function the way
they do, above there is a hint. However, coming up with something
more effective yet so simple at the same time requires much more thinking.</p>
</div>
</div>
<div class="section" id="aggregating">
<h3><span class="section-number">9.2.3. </span>Aggregating<a class="headerlink" href="#aggregating" title="Permalink to this headline">¶</a></h3>
<p>As we have already said, the only operation on categorical data
that we can rely on is counting. Therefore, as far as
qualitative data aggregation is concerned, what we are
left is the <em>mode</em>, i.e., the most frequently occurring value.</p>
<div class="section" id="categorical-data">
<h4><span class="section-number">9.2.3.1. </span>Categorical Data<a class="headerlink" href="#categorical-data" title="Permalink to this headline">¶</a></h4>
<p>There is one more measure of central tendency worth mentioning.
Namely, a <em>mode</em> is a most frequently occurring value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">categories</span><span class="p">,</span> <span class="n">counts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">countries</span><span class="p">,</span> <span class="n">return_counts</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">categories</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">counts</span><span class="p">)]</span>
<span class="c1">## &#39;PL&#39;</span>
</pre></div>
</div>
<p>Recall that if <code class="docutils literal notranslate"><span class="pre">i</span></code> is <code class="docutils literal notranslate"><span class="pre">argmax(counts)</span></code> (<em>argument maximum</em>),
then <code class="docutils literal notranslate"><span class="pre">counts[i]</span></code> is the same as <code class="docutils literal notranslate"><span class="pre">max(counts)</span></code>
and <code class="docutils literal notranslate"><span class="pre">categories[i]</span></code> is the category with the greatest counts.</p>
<blockquote>
<div><p><strong>Important.</strong> A mode might be ambiguous.</p>
</div></blockquote>
<p>For instance, amongst the fastest 22 runners,
there is a tie between Kenya and Poland – both meet our definition
of a mode:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">categories2</span><span class="p">,</span> <span class="n">counts2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">countries</span><span class="p">[:</span><span class="mi">22</span><span class="p">],</span> <span class="n">return_counts</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">categories2</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">counts2</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">counts2</span><span class="p">))]</span>
<span class="c1">## array([&#39;KE&#39;, &#39;PL&#39;], dtype=&#39;&lt;U2&#39;)</span>
</pre></div>
</div>
<p>To avoid any bias, it would be best to report
both of them as potential mode candidates.
Alternatively, we can pick one
at random (calling <strong class="command">numpy.random.choice</strong>).</p>
</div>
<div class="section" id="binned-numeric-data">
<h4><span class="section-number">9.2.3.2. </span>Binned Numeric Data<a class="headerlink" href="#binned-numeric-data" title="Permalink to this headline">¶</a></h4>
<p>Note that generally modes do not work for continuous data,
where repeated values are – at least theoretically – highly unlikely
(unless someone does not report them with full digit precision).
It might make sense to compute it on binned data, though.</p>
<p>Looking at a histogram, the mode is the interval corresponding to the
highest bar (hopefully assuming there is only one).
If we would like to obtain a single number, we can choose
for example the middle of this interval as the mode.</p>
<p>Of course, for numeric data, the mode will heavily depend
on the binning (recall that we can also apply logarithmic binning).
Thus, the question “what is the most popular income” is overall quite
difficult to answer.</p>
<blockquote>
<div><p><strong>Exercise.</strong>
Compute some potentially informative modes for
the <a class="reference external" href="https://raw.githubusercontent.com/gagolews/%5Cteaching_data/master/marek/uk_income_simulated_2020.txt">2020 UK income</a> data.
Play around with different numbers
of bins for linear and logarithmic binning and see how it affects the mode.</p>
</div></blockquote>
</div>
<div class="section" id="ordinal-data">
<h4><span class="section-number">9.2.3.3. </span>Ordinal Data (*)<a class="headerlink" href="#ordinal-data" title="Permalink to this headline">¶</a></h4>
<p>In case where the categories can be linearly ordered,
i.e., ordinal data, except for the mode, we can also define sample quantiles,
although the standard methods for resolving ties will not work.</p>
<p>For example, median of a sample of student grades
(P, P, C, D, HD) is C, but
(P, P, C, D, HD, HD) is either C or D - we can choose one at random
or just report that the solution is ambiguous.</p>
<p>Another option, of course, is to treat ordinal data as numbers
(e.g., F=1, P=2, …, HD=5). In the latter example, the median would
be equal to 3.5.</p>
<p>There are some cases, though, where the conversion of
labels to consecutive integers is far from optimal – because
it gives the impression that the “distance” between different
levels is always equal (linear).</p>
<blockquote>
<div><p>(**) <strong>Exercise.</strong>
The <a class="reference external" href="https://raw.githubusercontent.com/gagolews/teaching_data/master/marek/grades_results.txt">grades_results</a> represents the grades (F, P, C, D, HD)
of 100 students attending an imaginary course in a virtual Australian
university. How would you determine the <em>average</em> grade represented as
a number between 0 and 100, taking into account that
for a P you need at least 50%, C is given for ≥ 60%,
D for ≥ 70%, and HD for only 80% of the points.
Come up with a pessimistic, optimistic, and a best-shot estimate
and then compare your result
to the true corresponding scores listed in the
<a class="reference external" href="https://raw.githubusercontent.com/gagolews/teaching_data/master/marek/grades_scores.txt">grades_scores</a> dataset.</p>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="binary-data-and-logical-vectors">
<h2><span class="section-number">9.3. </span>Binary Data and Logical Vectors<a class="headerlink" href="#binary-data-and-logical-vectors" title="Permalink to this headline">¶</a></h2>
<p><em>Binary data</em> is a special case of the qualitative setting,
where we only have two categories.</p>
<p>For convenience, we usually encode the two classes
as integer 0 (or logical <code class="docutils literal notranslate"><span class="pre">False</span></code>, e.g., healthy/fail/off/non-spam/absent/…)
and 1 (or <code class="docutils literal notranslate"><span class="pre">True</span></code>, e.g., ill/success/on/spam/present/…).</p>
<blockquote>
<div><p><strong>Important.</strong> When converting
logical to numeric, <code class="docutils literal notranslate"><span class="pre">False</span></code> becomes 0 and <code class="docutils literal notranslate"><span class="pre">True</span></code> becomes 1.
Conversely, 0 is converted to <code class="docutils literal notranslate"><span class="pre">False</span></code> and anything else (including -0.327)
to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</div></blockquote>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="c1">## array([1, 0, 1, 1, 0])</span>
<span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.326</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.000001</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7643</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
<span class="c1">## array([ True,  True,  True, False,  True,  True,  True])</span>
</pre></div>
</div>
<p>or, equivalently:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.326</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.000001</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7643</span><span class="p">])</span> <span class="o">!=</span> <span class="mi">0</span>
<span class="c1">## array([ True,  True,  True, False,  True,  True,  True])</span>
</pre></div>
</div>
<p>Perhaps the most useful arithmetic operation on
logical vectors is the sum.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">countries</span><span class="p">[:</span><span class="mi">16</span><span class="p">]</span>
<span class="n">x</span>  <span class="c1"># recall</span>
<span class="c1">## array([&#39;KE&#39;, &#39;KE&#39;, &#39;KE&#39;, &#39;ET&#39;, &#39;KE&#39;, &#39;KE&#39;, &#39;ET&#39;, &#39;MA&#39;, &#39;PL&#39;, &#39;PL&#39;, &#39;IL&#39;,</span>
<span class="c1">##        &#39;PL&#39;, &#39;KE&#39;, &#39;KE&#39;, &#39;PL&#39;, &#39;PL&#39;], dtype=&#39;&lt;U2&#39;)</span>
<span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="s2">&quot;KE&quot;</span><span class="p">)</span>
<span class="c1">## 7</span>
</pre></div>
</div>
<p>is the number of elements in <code class="docutils literal notranslate"><span class="pre">x</span></code> that are equal to <code class="docutils literal notranslate"><span class="pre">&quot;KE&quot;</span></code>
(because the sum of 0s and 1s is equal to the number of 1s in the sequence).
Note that <code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">==</span> <span class="pre">&quot;KE&quot;)</span></code> is a logical vector that
represents a binary categorical variable
with levels: not-Kenya (<code class="docutils literal notranslate"><span class="pre">False</span></code>) and Kenya (<code class="docutils literal notranslate"><span class="pre">True</span></code>).</p>
<p>If we divide the above result by the length of the vector,
we will get the proportion:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="s2">&quot;KE&quot;</span><span class="p">)</span>
<span class="c1">## 0.4375</span>
</pre></div>
</div>
<p>Hence, almost 44% amongst the top 16 runners are from Kenya.</p>
<blockquote>
<div><p><strong>Exercise.</strong> What is the meaning of
<strong class="command">numpy.all</strong>, <strong class="command">numpy.any</strong>, <strong class="command">numpy.min</strong>, <strong class="command">numpy.max</strong>,
<strong class="command">numpy.cumsum</strong>, and <strong class="command">numpy.cumprod</strong> applied on logical vectors?</p>
</div></blockquote>
<p>(**)  Having the 0/1 (or zero/nonzero) vs <code class="docutils literal notranslate"><span class="pre">False</span></code>/<code class="docutils literal notranslate"><span class="pre">True</span></code> correspondence
allows us to perform some logical operations using
integer arithmetic.
In particular, assuming that <code class="docutils literal notranslate"><span class="pre">p</span></code> and <code class="docutils literal notranslate"><span class="pre">q</span></code> are logical values
and <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> are numeric ones, we have, what follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">p+q</span> <span class="pre">!=</span> <span class="pre">0</span></code> means that at least one value is <code class="docutils literal notranslate"><span class="pre">True</span></code>
and <code class="docutils literal notranslate"><span class="pre">p+q</span> <span class="pre">==</span> <span class="pre">0</span></code> if and only if both are <code class="docutils literal notranslate"><span class="pre">False</span></code>;</p></li>
<li><p>more generally, <code class="docutils literal notranslate"><span class="pre">p+q</span> <span class="pre">==</span> <span class="pre">2</span></code> if both elements are <code class="docutils literal notranslate"><span class="pre">True</span></code>,
<code class="docutils literal notranslate"><span class="pre">p+q</span> <span class="pre">==</span> <span class="pre">1</span></code> if only one is <code class="docutils literal notranslate"><span class="pre">True</span></code> (we call it exclusive-or, XOR),
and <code class="docutils literal notranslate"><span class="pre">p+q</span> <span class="pre">==</span> <span class="pre">0</span></code> if both are <code class="docutils literal notranslate"><span class="pre">False</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">p*q</span> <span class="pre">!=</span> <span class="pre">0</span></code> means that both values are <code class="docutils literal notranslate"><span class="pre">True</span></code>
and <code class="docutils literal notranslate"><span class="pre">p*q</span> <span class="pre">==</span> <span class="pre">0</span></code> holds whenever at least one is <code class="docutils literal notranslate"><span class="pre">False</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1-p</span></code> corresponds to negation of <code class="docutils literal notranslate"><span class="pre">p</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">p*a</span> <span class="pre">+</span> <span class="pre">(1-p)*b</span></code> is equal to <code class="docutils literal notranslate"><span class="pre">a</span></code> if <code class="docutils literal notranslate"><span class="pre">p</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code> and equal to <code class="docutils literal notranslate"><span class="pre">b</span></code> otherwise.</p></li>
</ul>
</div>
<div class="section" id="questions">
<h2><span class="section-number">9.4. </span>Questions<a class="headerlink" href="#questions" title="Permalink to this headline">¶</a></h2>
<div class="proof proof-type-exercise" id="id6">

    <div class="proof-title">
        <span class="proof-type">Exercise 9.1</span>
        
    </div><div class="proof-content">
<p>Does it make sense to compute the arithmetic mean of a categorical
variable?</p>
</div></div><div class="proof proof-type-exercise" id="id7">

    <div class="proof-title">
        <span class="proof-type">Exercise 9.2</span>
        
    </div><div class="proof-content">
<p>Name the basic use cases for categorical data.</p>
</div></div><div class="proof proof-type-exercise" id="id8">

    <div class="proof-title">
        <span class="proof-type">Exercise 9.3</span>
        
    </div><div class="proof-content">
<p>(*) What is a Pareto chart?</p>
</div></div><div class="proof proof-type-exercise" id="id9">

    <div class="proof-title">
        <span class="proof-type">Exercise 9.4</span>
        
    </div><div class="proof-content">
<p>How to deal with the case of the mode being nonunique?</p>
</div></div><div class="proof proof-type-exercise" id="id10">

    <div class="proof-title">
        <span class="proof-type">Exercise 9.5</span>
        
    </div><div class="proof-content">
<p>What is the meaning of <strong class="command">numpy.mean</strong><code class="code docutils literal notranslate"><span class="pre">((x</span> <span class="pre">&gt;</span> <span class="pre">0)</span> <span class="pre">&amp;</span> <span class="pre">(x</span> <span class="pre">&lt;</span> <span class="pre">1))</span></code>, where
<code class="docutils literal notranslate"><span class="pre">x</span></code> is a numeric vector?</p>
</div></div><div class="proof proof-type-exercise" id="id11">

    <div class="proof-title">
        <span class="proof-type">Exercise 9.6</span>
        
    </div><div class="proof-content">
<p>What is the meaning of the sum and mean for binary data (logical vectors)?</p>
</div></div></div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="310-matrix.html" class="btn btn-neutral float-right" title="10. Introduction to Matrices in numpy" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="250-distribution-uni.html" class="btn btn-neutral float-left" title="8. 🚧 Continuous Probability Distributions (**)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Marek Gagolewski. Licensed under CC BY-NC-ND 4.0.
      <span class="lastupdated">
        Last updated on 2022-03-29T16:43:07+1100.
      </span>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a>
    and a customised <a href="https://github.com/rtfd/sphinx_rtd_theme">rtd</a> theme.
    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>